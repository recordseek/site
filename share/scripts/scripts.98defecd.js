"use strict";window.maybe=function(a){return null!=a?a:{}};var RecordSeek=RecordSeek||{},HEADER_NAME="MyApp-Handle-Errors-Generically",specificallyHandleInProgress=!1;RecordSeek.helpers={isNotString:function(a){return"string"!=typeof a},decodeQueryString:function(a){var b={};if(a){a=decodeURIComponent(a).replace(/(\r\n|\n|\r)/gm," ").replace(/ +(?= )/g,"");var c=a.indexOf("?");if(-1!==c){var d="";d=-1!=a.indexOf("amp;")?decodeURIComponent(a).substring(c+1).split("&amp;"):decodeURIComponent(a).substring(c+1).split("&"),d.forEach(function(a){var c=a.indexOf("="),d=a.split("=",2);if(d&&d[0]){var e=d[0].trim(),f=null!=d[1]?decodeURIComponent(a.substring(c+1)):d[1];if(!f)return;f=f.replace(/(\r\n|\n|\r)/gm," ").replace(/ +(?= )/g,"").trim(),-1!==f.indexOf("#!/")&&(f=f.split("#!")[0]),b[e]&&console.log("KEY ALREADY EXISTS"),null==b[e]||Array.isArray(b[e])||(b[e]=[b[e]]),null!=b[e]?b[e].push(f):b[e]=f}})}}if(void 0!==b.url){for(var e=["_","h1","citation","title","e","ev","tags","url","notes"],f=JSON.parse(JSON.stringify(b)),g=0;g<e.length;g++)delete f[e[g]];if(Object.keys(f).length>0){var h=jQuery.param(f);-1===b.url.indexOf("?")?b.url+="?":b.url+="&",b.url+=h}}return b},appendQueryParameters:function(a,b){var c=this.encodeQueryString(b);return 0===c.length?a:a+(a.indexOf("?")>=0?"&":"?")+c},removeQueryString:function(a){if(a){var b=a.indexOf("?");-1!==b&&(a=a.substring(0,b))}return a},encodeQueryString:function(a){var b=[];return this.forEach(a,function(a,c){c=encodeURIComponent(c);var d;d=Array.isArray(a)?_.map(a,function(a){return c+"="+encodeURIComponent(a)}).join("&"):null!=a?c+"="+encodeURIComponent(a):c,b.push(d)}),b.join("&")},forEach:function(a,b,c){if(null!=a)if(Array.prototype.forEach&&a.forEach===Array.prototype.forEach)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,e=a.length;d<e;d++)if(b.call(c,a[d],d,a)==={})return}else for(var f in a)if(a.hasOwnProperty(f)&&b.call(c,a[f],f,a)==={})return}},"addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){FastClick.attach(document.body)},!1),angular.module("recordseekApp",["ngAnimate","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap"]).run(["$rootScope","$location","$cookies","$window","fsAPI","$http","$log","$timeout",function(a,b,c,d,e,f,g,h){if(f.defaults.useXDomain=!0,delete f.defaults.headers.common["X-Requested-With"],window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),document.location.origin||(document.location.origin=window.location.origin),a.helpers=RecordSeek.helpers,a.attachMsg="Source created by RecordSeek.com",a.saveSession=function(){Object.keys(a.data).forEach(function(b){var c=localStorage.getItem(b);q[b]||a.data&&a.data[b]?localStorage.setItem(b,q[b]):c&&""!=c&&(q[b]=c,p[b]=c)})},a.debug="localhost"===location.hostname,!a.debug){ga("create","UA-16096334-10"),ga("send","pageview");try{Sentry.init({dsn:"https://446c24f6e25e4168b4d71a90cbf74794@sentry.io/105393"})}catch(a){console.error("Sentry failing")}}a.service="",a.expires=15,a.log=function(b){a.debug&&g.debug(b)},a.getCookie=function(a){for(var b=a+"=",c=decodeURIComponent(document.cookie),d=c.split(";"),e=0;e<d.length;e++){for(var f=d[e];" "==f.charAt(0);)f=f.substring(1);if(0==f.indexOf(b))return f.substring(b.length,f.length)}return""},a.setCookie=function(b,d){var e=new Date,f=new Date(e);f.setMinutes(e.getMinutes()+a.expires),c.put(b,d,{expires:f})},a.deleteCookie=function(a){c.delete(a)},a.sourceFormats={APA:"{title}. ({year}, {month_full} {date}). Retrieved from {url}","Harvard - AGPS":"{title}. [online] Available at: <{url}> [Accessed {date} {month}. {year}]",MLA:'"{title}." {publisher} {url}. Accessed {date} {month}. {year}.',Chicago:'"{title}", {publisher}, accessed {month_full} {date}, {year}, {url}'},a.generateCitation=function(){if(!a.data.sourceFormat){var b=a.getCookie("recordseek_source_format");""!==b&&void 0!==a.sourceFormats[b]?a.data.sourceFormat=b:a.data.sourceFormat="MLA"}a.data.citation=a.sourceFormats[a.data.sourceFormat],a.data.citation=a.data.citation.replace("{title}",a.data.title),a.data.citation=a.data.citation.replace("{publisher}",a.data.publisher),a.data.citation=a.data.citation.replace("{url}",a.data.url),a.data.citation=a.data.citation.replace("{time}",a.data.time),a.data.citation=a.data.citation.replace("{date}",a.data.date),a.data.citation=a.data.citation.replace("{year}",a.data.year),a.data.citation=a.data.citation.replace("{month}",a.data.month),a.data.citation=a.data.citation.replace("{month_full}",a.data.month_full)},a.setCitationFormat=function(b){void 0!==a.sourceFormats[b]&&(a.data.sourceFormat=b,a.setCookie("recordseek_source_format",b),a.generateCitation())},a.logout=function(){a.log(e),"FamilySearch"===a.service&&e.completeLogout().then(function(){window.location.href=e.oauthRedirectURL()})},a.safeApply=function(){var a=this.$root.$$phase;"$apply"==a||"$digest"==a||this.$apply()},a.track=function(b){a.debug?a.log(b):ga("send","event",b)},a.actionTaken=function(c){var e=c.currentTarget.attributes;e["data-tracking"]&&a.track({eventCategory:"App",eventAction:e["data-tracking"].value}),"Ancestry"==e["data-tracking"].value&&e.id.nodeValue&&(a.data.media_url="https://recordseek.com/assets/images/ancestry.jpg"),!e["data-tracking"]||"FamilySearch"!==e["data-tracking"].value&&"Ancestry"!==e["data-tracking"].value||a.setCookie("recordseek-last-service",e["data-tracking"].value),e.target&&"_blank"===e.target.value?d.open(e["data-href"].value):b.path(e["data-href"].value)};var i=document.URL.split("#"),j=a.helpers.decodeQueryString(i[0]);if(!j.url){var k=c.get("recordseek-auth");if(k){var l=angular.fromJson(k);l&&(j=l)}}if(a.debug&&console.log(j),j.code){if(e.getAccessToken()&&"undefined"!=e.getAccessToken()){var m=[];for(var n in j)j.hasOwnProperty(n)&&"code"!==n&&m.push(n+"="+encodeURIComponent(j[n]));"http://recordseek.com"!==document.location.origin&&"https://recordseek.com"!==document.location.origin||document.location.origin+"/share/#!/?"+m.join("&amp;")+"#"+(i&&i[1]?i[1]:""),location.href="http://localhost:9000/?"+m.join("&")+"#"+(i&&i[1]?i[1]:"")}e.oauthToken(j.code,function(a,b){if(a||b.statusCode>=400)return void console.log("From oauthToken",a||b.statusCode);e.setAccessToken(b.data.access_token);var c=document.location.origin+"/#";"http://recordseek.com"!==document.location.origin&&"https://recordseek.com"!==document.location.origin||(c=document.location.origin+"/share/#!/?"),location.href=c})}if(j.tags&&!angular.equals({},j.tags)){if("string"==typeof j.tags||j.tags instanceof String){var o=j.tags.split(",");j.tags={},o.map(function(a){j.tags[a.toLowerCase()]=!0})}}else j.tags={};if((j.birthPlace||j.birthDate)&&(j.tags.birth=!0),(j.deathPlace||j.deathDate)&&(j.tags.death=!0),(j.givenName||j.surname)&&(j.tags.name=!0),j.gender&&(j.tags.gender=!0),a.log(j),1==j.r){delete j.r;var k=c.get("recordseek-auth");""!=k&&(j=angular.fromJson(k))}if(j){var p=j,q={},r=["h1"];for(var s in p){var t=p[s],u=typeof t;if(null!==t&&"string"===u&&p.hasOwnProperty(s)){if(-1!==s.indexOf(".")){var v=s.split(".");p[v[0]]=p[v[0]]?p[v[0]]:[],p[v[0]][v[1]]=p[s].replace(/(\r\n|\n|\r)/gm,"").replace(/ +(?= )/g,"").trim()}else p[s]=p[s].replace(/(\r\n|\n|\r)/gm,"").replace(/ +(?= )/g,"").trim();-1===r.indexOf(s)&&""!=p[s]&&(q[s]=p[s])}}angular.equals({},q)||(a.log(q),a.personData=q);var w=new Date;if(Date.prototype.yyyymmdd=function(){var a=this.getFullYear().toString(),b=(this.getMonth()+1).toString(),c=this.getDate().toString();return a+"/"+(b[1]?b:"0"+b[0])+"/"+(c[1]?c:"0"+c[0])},p.time=w.yyyymmdd(),p.url&&p.url.indexOf("billiongraves.com")>-1){var x=p.url.split("#");p.url=x[0]}a.data=p;var y=new Date;if(void 0!==a.data._){var z="/Date("+a.data._+")/";y=new Date(parseFloat(z.substr(6)))}var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B=["January","February","March","April","May","June","July","August","September","October","November","December"],C=y.getFullYear(),D=A[y.getMonth()],w=(B[y.getMonth()],y.getDate());if(a.data.time=w+" "+D+". "+C,a.data.year=y.getFullYear(),a.data.month=A[y.getMonth()],a.data.month_full=B[y.getMonth()],a.data.date=y.getDate(),a.data.url&&""!==a.data.url){if(a.data.url.indexOf("ancestry")>-1&&(a.data.url=a.data.url.replace("ancestryinstitution.com","ancestry.com").replace("ancestrylibrary.com","ancestry.com").replace("ancestrylibrary.proquest.com","ancestry.com").replace("ancestryclassroom.com","ancestry.com").replace("ancestrylibrary.proquest.com","ancestry.com")),a.data.url&&(a.data.url.indexOf("www.ancestry.")>-1||a.data.url.indexOf("search.ancestry.")>-1)){var E=RecordSeek.helpers.decodeQueryString(a.data.url),F=E.dbid?"dbid":"db",G={indiv:"try",h:E.h,_phsrc:E._phsrc?E._phsrc:"",pid:E.pid?E.pid:""};G[F]=E[F],Object.keys(G).forEach(function(a){""===G[a]&&delete G[a]}),a.data.url=RecordSeek.helpers.appendQueryParameters(RecordSeek.helpers.removeQueryString(a.data.url),G)}var H="";a.data.title||(a.data.title="");var I=a.data.title,J="";if(a.data.title.includes("|")?J="|":a.data.title.includes("-")?J="-":a.data.title.includes(";")&&(J=";"),""!=J){var K=a.data.title.split(J);H=K[K.length-1],I=I.replace(J+H,""),I=I.replace(J+" "+H,"").trim()}if(I.includes('"')&&(I=I.replace(new RegExp('"',"g"),"'")),I.includes(a.data.url)&&(I=I.replace(a.data.url,"")),a.data.title=I,""===H&&(H=a.data.url.replace("http://","").replace("www.","").replace("https://","").split(/[\/?#]/)[0].split(".")[0]),a.data.publisher=H.charAt(0).toUpperCase()+H.slice(1),a.data.url){var L=a.data.url.split("//"),M=L[1];M&&(L=M.replace("www.","").split("/")[0],a.data.domain=L.charAt(0).toUpperCase()+L.slice(1),a.track({eventCategory:"Domain",eventAction:a.data.domain.toLowerCase().replace("www.","")}))}}a.data.notes&&(a.data.notes=a.data.notes.trim().replace("#/fs-source","")),a.data.notes&&""!==a.data.notes.trim()?a.data.notes+="\n\n":a.data.notes="",-1===a.data.notes.indexOf(a.attachMsg)&&(a.data.notes+=a.attachMsg),a.data.title||(a.data.title=""),a.data.citation||(a.data.citation=""),a.generateCitation()}else"http://recordseek.com"!==document.location.origin&&"https://recordseek.com"!==document.location.origin&&a.data;a.$on("$routeChangeSuccess",function(){"http://recordseek.com"!==document.location.origin&&"https://recordseek.com"!==document.location.origin&&a.data&&"/about"!==b.$$path&&"/support"!==b.$$path&&"/expired"!==b.$$path&&a.data}),a.data||(a.data={}),a.data.addPerson||(a.data.addPerson={}),a.auth={};var N="";if(a.resetSearch=function(b){a.data.search&&a.data.search.advanced&&(N=a.data.search.advanced);var c={givenName:"",givenNameExact:"",surname:"",surnameExact:"",gender:"",eventType:"",eventDate:"",eventDateFrom:"",eventDateTo:"",eventPlace:"",eventPlaceExact:"",spouseGivenName:"",spouseGivenNameExact:"",spouseSurname:"",spouseSurnameExact:"",motherGivenName:"",motherGivenNameExact:"",motherSurname:"",motherSurnameExact:"",fatherGivenName:"",fatherGivenNameExact:"",fatherSurname:"",fatherSurnameExact:"",pid:"",status:""};if(""!==N?c.advanced=N:N=!1,b)return c;a.data.search=c},a.tagCounting=function(){var b=0;angular.forEach(a.data.tags,function(a,c){!0===a&&b++},b),0===b&&(b=""),a.tagCount=b},a.tagCounting(),a.closeTags=function(){h(function(){angular.element("#sourceTags").trigger("click")},0)},!a.data.search&&(a.resetSearch(),a.data.search.advanced=!1,a.personData&&!angular.equals({},a.personData)))for(var s in a.personData)a.personData[s],-1!==a.data.search.hasOwnProperty(s)&&(a.data.search[s]=a.personData[s])}]).constant("_",_).config(["$provide","$routeProvider",function(a,b){a.decorator("$exceptionHandler",["$delegate","$window",function(a,b){return function(c,d){b.trackJs&&b.trackJs.track(c),a(c,d)}}]),b.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/loading",{templateUrl:"views/loading.html",controller:"LoadingCtrl"}).when("/support",{templateUrl:"views/support.html",controller:"SupportCtrl"}).when("/fs-source",{templateUrl:"views/fs-source.html",controller:"FsSourceCtrl"}).when("/fs-upload",{templateUrl:"views/fs-upload.html",controller:"FsUploadCtrl"}).when("/fs-search",{templateUrl:"views/fs-search.html",controller:"FsSearchCtrl"}).when("/fs-addperson",{templateUrl:"views/fs-addperson.html",controller:"FsAddpersonCtrl"}).when("/fs-attach",{templateUrl:"views/fs-attach.html",controller:"FsAttachCtrl"}).when("/fs-addattach",{templateUrl:"views/fs-addattach.html",controller:"FsAddAttachCtrl"}).when("/fs-complete",{templateUrl:"views/fs-complete.html",controller:"FsCompleteCtrl"}).when("/a-source",{templateUrl:"views/a-source.html",controller:"ASourceCtrl"}).when("/fs-results",{templateUrl:"views/fs-results.html",controller:"FsResultsCtrl"}).when("/fs-create",{templateUrl:"views/fs-create.html",controller:"FsCreateCtrl"}).otherwise({redirectTo:"/"})}]).factory("RequestsErrorHandler",["$q",function(a){return{specificallyHandled:function(a){specificallyHandleInProgress=!0;try{return a()}finally{specificallyHandleInProgress=!1}},responseError:function(b){var c=b&&b.config&&b.config.headers&&b.config.headers[HEADER_NAME];return alert("response Error"),c&&(alert("An error occured"),console.log(b)),a.reject(b)}}}]).config(["$provide","$httpProvider",function(a,b){function c(a){return a=a||{},a.headers=a.headers||{},specificallyHandleInProgress||(a.headers[HEADER_NAME]=!0),a}b.interceptors.push("RequestsErrorHandler"),a.decorator("$http",["$delegate",function(a){function b(b){return function(d,e){return a[b](d,c(e))}}function d(b){return function(d,e,f){return a[b](d,e,c(f))}}function e(b){for(var c in a)b.hasOwnProperty(c)||("function"==typeof a[c]?b[c]=function(){return a[c].apply(a,arguments)}:b[c]=a[c])}var f=function(b){return a(c(b))};return f.get=b("get"),f.delete=b("delete"),f.head=b("head"),f.jsonp=b("jsonp"),f.post=d("post"),f.put=d("put"),e(f),f}])}]),angular.module("recordseekApp").controller("MainCtrl",["$cookies","$rootScope","$scope","$timeout",function(a,b,c,d){b.service="";var e=a.get("recordseek-last-service");e&&d(function(){angular.element("#load"+e).trigger("click")},0)}]);var init=function(){var a=800,b=675;window.resizeTo(a,b),window.moveTo(screen.width-a,(screen.height-b)/2)};angular.module("recordseekApp").controller("LoadingCtrl",["$rootScope",function(a){a.service=""}]),angular.module("recordseekApp").controller("AboutCtrl",["$rootScope",function(a){a.service=""}]),angular.module("recordseekApp").controller("SupportCtrl",["$rootScope",function(a){a.service=""}]),angular.module("recordseekApp").controller("FsSourceCtrl",["$cookies","$rootScope","$location","$scope","fsAPI",function(a,b,c,d,e,f){b.service="FamilySearch",d.fsLogout=function(){e.completeLogout()},e.displayUser(d),b.data.search.newPerson&&delete b.data.search.newPerson,d.origSource=b.data.citation,d.myPopover={isOpen:!1,templateUrl:"tagTemplate.html",toggle:function(){1!=d.myPopover.isOpen?d.myPopover.isOpen=!1:d.myPopover.isOpen=!0},close:function(){d.myPopover.isOpen=!1}},d.goNext=function(){c.path("/fs-search"),d.origSource!==b.data.citation&&b.track({eventCategory:"FamilySearch",eventAction:"Citation",eventLabel:"Modified"}),b.log(b.data)},d.goBack=function(){a.remove("recordseek-last-service"),b.service="",c.path("/")},d.goUpload=function(){c.path("/fs-upload")},d.createNow=function(){b.track({eventCategory:"FamilySearch",eventAction:"Create",eventLabel:"Now"}),delete b.data.attach,b.data.complete="noAttachment",c.path("/fs-create"),b.safeApply()},d.sourceFormats=b.sourceFormats,d.sourceFormat=b.data.sourceFormat,d.changeFormat=function(){b.setCitationFormat(d.sourceFormat)}}]),angular.module("recordseekApp").controller("FsUploadCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("recordseekApp").controller("FsSearchCtrl",["$rootScope","$location","$scope","fsAPI","fsUtils",function(a,b,c,d,e){function f(a,b){for(var c=Math.ceil(a.length/b),d=new Array(c),e=0,f=0;e<c;++e,f+=b)d[e]=a.substr(f,b);return d}a.service="FamilySearch",c.pid_check=function(){a.data.search.pid=a.data.search.pid.trim().toUpperCase().replace(/[^A-Za-z0-9\-]/g,""),a.data.search.pid.length>=7&&(a.data.search.pid=a.data.search.pid.split("-").join(""),a.data.search.pid=f(a.data.search.pid,4).join("-"))},c.pid_state=function(){return a.data.search.pid.length>0&&a.data.search.pid.length<8?"has-warning":a.data.search.pid.length>=8?"has-success":void 0},d.displayUser(c),a.data.search.advanced?c.advancedButtonText="Basic":c.advancedButtonText="Advanced",c.emptyData=a.resetSearch(!0),c.getLocation=e.getLocation,c.removeEmpty=e.removeEmptyProperties,c.advancedSearch=function(){a.data.search.advanced?(a.data.search.advanced=!1,c.advancedButtonText="Advanced"):(c.advancedButtonText="Basic",a.data.search.advanced=!0)},c.validData=function(){return a.data.search.pid.length>0?a.data.search.pid.length<8:!!angular.equals(c.emptyData,a.data.search)},c.goNext=function(){angular.equals(c.emptyData,a.data.search)||b.path("/fs-results")},c.goBack=function(){b.path("/fs-source")}}]),angular.module("recordseekApp").controller("FsAddpersonCtrl",["$rootScope","$location","$scope","fsAPI","fsUtils",function(a,b,c,d,e){a.service="FamilySearch",d.displayUser(c),a.data.search=e.cleanSearch(a.data.search),(a.data.search.motherGivenName||a.data.search.motherSurname||a.data.search.fatherGivenName||a.data.search.fatherSurname||a.data.search.spouseGivenName||a.data.search.spouseSurname)&&(c.isCollapsed=!0),c.langTemplates=e.langTemplates(),c.status={isopen:!1},c.toggleDropdown=function(a){a.preventDefault(),a.stopPropagation(),c.status.isopen=!c.status.isopen},c.changeTemplate=function(b){a.data.search.langTemplate=b,"Cyrillic"==b?(c.title1="Cyrillic",c.title2="Roman"):"Chinese"==b?(c.title1="Hanzi",c.title2="Roman"):"Japanese"==b?(c.title1="Kanji",c.title2="Kana",c.title3="Roman"):"Khmer"==b?(c.title1="Khmer",c.title2="Roman"):"Korean"==b?(c.title1="Hangul",c.title2="Hanja",c.title3="Roman"):"Mongolian"==b?(c.title1="Mongolian",c.title2="Roman"):"Thai"==b?(c.title1="Thai",c.title2="Roman"):"Vietnamese"==b&&(c.title1="Vietnamese",c.title2="Roman")},c.getLocation=e.getLocation,c.removeEmpty=e.removeEmptyProperties,c.getDate=e.getDate,c.goNext=function(){a.data.search.newPerson=1,b.path("/fs-addattach")},c.goBack=function(){b.path("/fs-search")}}]),angular.module("recordseekApp").controller("FsAddAttachCtrl",["$rootScope","$location","$scope","fsAPI","fsUtils",function(a,b,c,d,e){a.service="FamilySearch",d.displayUser(c),a.log(a.data.search),a.data.search=e.cleanSearch(a.data.search),a.toCreate=[];var f="",g={};c.myPopover={isOpen:!1,templateUrl:"tagTemplate.html",toggle:function(){1!=c.myPopover.isOpen?c.myPopover.isOpen=!1:c.myPopover.isOpen=!0},close:function(){c.myPopover.isOpen=!1}},a.data.search.langTemplate&&(g.names={},"Cyrillic"==a.data.search.langTemplate?(g.names.cyrillic={},f={title:"Name",sub:"Cyrillic",value:""},a.data.search.prefix1&&(f.value+=a.data.search.prefix1+" ",g.names.cyrillic.$prefix=a.data.search.prefix1),a.data.search.givenName1&&(f.value+=a.data.search.givenName1+" ",g.names.cyrillic.$givenName=a.data.search.givenName1),a.data.search.surname1&&(f.value+=a.data.search.surname1+" ",g.names.cyrillic.$surname=a.data.search.surname1),a.data.search.suffix1&&(f.value+=a.data.search.suffix1,g.names.cyrillic.$suffix=a.data.search.suffix1),""!==f.value&&a.toCreate.push(f),f={title:"Name",sub:"Roman",value:""},g.names.roman={},a.data.search.prefix2&&(f.value+=a.data.search.prefix2+" ",g.names.roman.$prefix=a.data.search.prefix2),a.data.search.givenName2&&(f.value+=a.data.search.givenName2+" ",g.names.roman.$givenName=a.data.search.givenName2),a.data.search.surname2&&(f.value+=a.data.search.surname2+" ",g.names.roman.$surname=a.data.search.surname2),a.data.search.suffix2&&(f.value+=a.data.search.suffix2),""!==f.value&&a.toCreate.push(f)):"Chinese"==a.data.search.langTemplate?(f={title:"Name",sub:"Hanzi",value:""},g.names.hanzi={},a.data.search.prefix1&&(f.value+=a.data.search.prefix1+" ",g.names.hanzi.$prefix=a.data.search.prefix1),a.data.search.surname1&&(f.value+=a.data.search.surname1+" ",g.names.hanzi.$surname=a.data.search.surname1),a.data.search.givenName1&&(f.value+=a.data.search.givenName1+" ",g.names.hanzi.$givenName=a.data.search.givenName1),a.data.search.suffix1&&(f.value+=a.data.search.suffix1),""!==f.value&&a.toCreate.push(f),f={title:"Name",sub:"Roman",value:""},g.names.roman={},a.data.search.prefix2&&(f.value+=a.data.search.prefix2+" ",a.newPerson.names.roman.$prefix=a.data.search.prefix2),a.data.search.surname2&&(f.value+=a.data.search.surname2+" ",g.names.roman.$surname=a.data.search.surname2),a.data.search.givenName2&&(f.value+=a.data.search.givenName2+" ",g.names.roman.$givenName=a.data.search.givenName1),a.data.search.suffix2&&(f.value+=a.data.search.suffix2),""!==f.value&&a.toCreate.push(f)):"Japanese"==a.data.search.langTemplate?(f={title:"Name",sub:"Kanji",value:""},g.names.kanji={},a.data.search.surname1&&(f.value+=a.data.search.surname1+" ",g.names.kanji.$surname=a.data.search.surname1),a.data.search.givenName1&&(f.value+=a.data.search.givenName1+" ",g.names.kanji.$givenName=a.data.search.givenName1),a.data.search.suffix1&&(f.value+=a.data.search.suffix1),""!==f.value&&a.toCreate.push(f),f={title:"Name",sub:"Kana",value:""},g.names.kana={},a.data.search.surname2&&(f.value+=a.data.search.surname2+" ",g.names.kana.$surname=a.data.search.surname2),a.data.search.givenName2&&(f.value+=a.data.search.givenName2+" ",g.names.kana.$givenName=a.data.search.givenName2),a.data.search.suffix2&&(f.value+=a.data.search.suffix2),""!==f.value&&a.toCreate.push(f),f={title:"Name",sub:"Roman",value:""},g.names.roman={},a.data.search.surname3&&(f.value+=a.data.search.surname3+" ",g.names.roman.$surname=a.data.search.surname3),a.data.search.givenName3&&(f.value+=a.data.search.givenName3+" ",g.names.roman.$givenName=a.data.search.givenName3),a.data.search.suffix3&&(f.value+=a.data.search.suffix3),""!==f.value&&a.toCreate.push(f)):"Khmer"==a.data.search.langTemplate?(f={title:"Name",sub:"Khmer",value:""},g.names.khmer={},a.data.search.prefix1&&(f.value+=a.data.search.prefix1+" ",a.newPerson.names.khmer.$prefix=a.data.search.prefix1),a.data.search.givenName1&&(f.value+=a.data.search.givenName1+" ",g.names.khmer.$givenName=a.data.search.givenName1),a.data.search.surname1&&(f.value+=a.data.search.surname1+" ",g.names.khmer.$surname=a.data.search.surname1),a.data.search.suffix1&&(f.value+=a.data.search.suffix1),""!==f.value&&a.toCreate.push(f),f={title:"Name",sub:"Roman",value:""},g.names.roman={},a.data.search.prefix2&&(g.names.roman.$prefix=a.data.search.prefix2,f.value+=a.data.search.prefix2+" "),a.data.search.givenName2&&(f.value+=a.data.search.givenName2+" ",g.names.roman.$givenName=a.data.search.givenName2),a.data.search.surname2&&(f.value+=a.data.search.surname2+" ",g.names.roman.$surname=a.data.search.surname2),a.data.search.suffix2&&(f.value+=a.data.search.suffix2),""!==f.value&&a.toCreate.push(f)):"Korean"==a.data.search.langTemplate?(f={title:"Name",sub:"Hangul",value:""},g.names.hangul={},a.data.search.surname1&&(f.value+=a.data.search.surname1+" ",g.names.hangul.$surname=a.data.search.surname1),a.data.search.givenName1&&(f.value+=a.data.search.givenName1+" ",g.names.hangul.$givenName=a.data.search.givenName1),a.data.search.suffix1&&(f.value+=a.data.search.suffix1),""!==f.value&&a.toCreate.push(f),f={title:"Name",sub:"Hanja",value:""},g.names.hanja={},a.data.search.surname2&&(f.value+=a.data.search.surname2+" ",g.names.hanji.$surname=a.data.search.surname2),a.data.search.givenName2&&(f.value+=a.data.search.givenName2+" ",g.names.hanja.$givenName=a.data.search.givenName2),a.data.search.suffix2&&(f.value+=a.data.search.suffix2),""!==f.value&&a.toCreate.push(f),f={title:"Name",sub:"Roman",value:""},g.names.roman={},a.data.search.surname3&&(f.value+=a.data.search.surname3+" ",g.names.roman.$surname=a.data.search.surname3),a.data.search.givenName3&&(f.value+=a.data.search.givenName3+" ",g.names.roman.$givenName=a.data.search.givenName3),a.data.search.suffix3&&(f.value+=a.data.search.suffix3),""!==f.value&&a.toCreate.push(f)):"Mongolian"==a.data.search.langTemplate?(f={title:"Name",sub:"Mongolian",value:""},g.names.mongolian={},a.data.search.prefix1&&(f.value+=a.data.search.prefix1+" ",g.names.mongolian.$prefix=a.data.search.prefix1),a.data.search.surname1&&(f.value+=a.data.search.surname1+" ",g.names.mongolian.$surname=a.data.search.surname1),a.data.search.givenName1&&(f.value+=a.data.search.givenName1+" ",g.names.mongolian.$givenName=a.data.search.givenName1),""!==f.value&&a.toCreate.push(f),f={title:"Name",sub:"Roman",value:""},g.names.roman={},a.data.search.prefix2&&(f.value+=a.data.search.prefix2+" ",g.names.roman.$prefix=a.data.search.prefix2),a.data.search.surname2&&(f.value+=a.data.search.surname2+" ",g.names.roman.$surname=a.data.search.surname2),a.data.search.givenName2&&(f.value+=a.data.search.givenName2+" ",g.names.roman.$givenName=a.data.search.givenName2),""!==f.value&&a.toCreate.push(f)):"Thai"==a.data.search.langTemplate?(f={title:"Name",sub:"Thai",value:""},g.names.thai={},a.data.search.prefix1&&(f.value+=a.data.search.prefix1+" ",g.names.thai.$prefix=a.data.search.prefix1),a.data.search.givenName1&&(f.value+=a.data.search.givenName1+" ",g.names.thai.$givenName=a.data.search.givenName1),a.data.search.surname1&&(f.value+=a.data.search.surname1+" ",g.names.thai.$surname=a.data.search.surname1),""!==f.value&&a.toCreate.push(f),f={title:"Name",sub:"Roman",value:""},g.names.roman={},a.data.search.prefix2&&(f.value+=a.data.search.prefix2+" ",g.names.roman.$prefix=a.data.search.prefix2),a.data.search.givenName2&&(f.value+=a.data.search.givenName2+" ",g.names.roman.$givenName=a.data.search.givenName2),a.data.search.surname2&&(f.value+=a.data.search.surname2+" ",g.names.roman.$surname=a.data.search.surname2),""!==f.value&&a.toCreate.push(f)):"Vietnamese"==a.data.search.langTemplate?(f={title:"Name",sub:"Vietnamese",value:""},g.names.vietnamese={},a.data.search.prefix1&&(f.value+=a.data.search.prefix1+" ",g.names.vietnamese.$prefix=a.data.search.prefix1),a.data.search.givenName1&&(f.value+=a.data.search.givenName1+" ",g.names.vietnamese.$givenName=a.data.search.givenName1),a.data.search.surname1&&(f.value+=a.data.search.surname1+" ",g.names.vietnamese.$surname=a.data.search.surname1),""!==f.value&&a.toCreate.push(f),f={title:"Name",sub:"Roman",value:""},g.names.roman={},a.data.search.prefix2&&(f.value+=a.data.search.prefix2+" ",g.names.roman.$prefix=a.data.search.prefix2),a.data.search.givenName2&&(f.value+=a.data.search.givenName2+" ",g.names.roman.$givenName=a.data.search.givenName1),a.data.search.surname2&&(f.value+=a.data.search.surname2+" ",g.names.roman.$surname=a.data.search.surname2),""!==f.value&&a.toCreate.push(f)):(f={title:"Name",value:""},g.names.standard={},a.data.search.prefix1&&(f.value+=a.data.search.prefix1+" ",g.names.standard.$prefix=a.data.search.prefix1),a.data.search.givenName1&&(f.value+=a.data.search.givenName1+" ",g.names.standard.$givenName=a.data.search.givenName1),a.data.search.surname1&&(f.value+=a.data.search.surname1+" ",g.names.standard.$surname=a.data.search.surname1),a.data.search.suffix1&&(f.value+=a.data.search.suffix1),a.toCreate.push(f))),a.data.search.gender&&(a.toCreate.push({title:"Gender",value:a.data.search.gender}),g.gender="http://gedcomx.org/"+a.data.search.gender),g.events={},(a.data.search.birthDate||a.data.search.birthPlace)&&(f={title:"Birth",value:""},g.events.birth={type:"http://gedcomx.org/Birth"},a.data.search.birthDate&&(a.data.search.birthDate.normalized?(f.value+=a.data.search.birthDate.normalized,g.events.birth.$date=a.data.search.birthDate.normalized):(f.value+=a.data.search.birthDate,g.events.birth.$date=a.data.search.birthDate)),a.data.search.birthPlace&&(a.data.search.birthDate&&(f.value+="<br />"),f.value+=a.data.search.birthPlace,g.events.birth.$place=a.data.search.birthPlace),a.toCreate.push(f)),(a.data.search.deathDate||a.data.search.deathPlace)&&"Living"!=a.data.search.status?(f={title:"Death",value:""},g.events.death={type:"http://gedcomx.org/Death"},a.data.search.deathDate&&(a.data.search.deathDate.normalized?(f.value+=a.data.search.deathDate.normalized,g.events.death.$date=a.data.search.deathDate.normalized):(f.value+=a.data.search.deathDate,g.events.death.$date=a.data.search.deathDate)),a.data.search.deathPlace&&(a.data.search.deathDate&&(f.value+="<br />"),f.value+=a.data.search.deathPlace,g.events.death.$place=a.data.search.deathPlace),a.toCreate.push(f)):a.data.search.status&&a.toCreate.push({title:"Death",value:'<span class="text-muted">'+a.data.search.status+"</span>"}),c.goBack=function(){b.path("/fs-addperson")},c.goNext=function(){angular.equals({},g)||(a.toCreate=g),b.path("/fs-create")}}]),angular.module("recordseekApp").controller("FsAttachCtrl",["$rootScope","$location","$scope","fsAPI",function(a,b,c,d){a.service="FamilySearch",d.displayUser(c),a.data.attach||a.debug||(a.data.search?b.path("/fs-results"):b.path("/fs-search")),a.data.attach.justification||(a.data.attach.justification=""),c.myPopover={isOpen:!1,templateUrl:"tagTemplate.html",toggle:function(){1!=c.myPopover.isOpen?c.myPopover.isOpen=!1:c.myPopover.isOpen=!0},close:function(){c.myPopover.isOpen=!1}},c.goBack=function(){a.log(a.data),a.data.search.pid&&""!=a.data.search.pid?b.path("/fs-search"):b.path("/fs-results")},c.goNext=function(){b.path("/fs-create")}}]),angular.module("recordseekApp").controller("FsCompleteCtrl",["fsAPI","$rootScope","$scope","$location","$cookies","fsUtils",function(a,b,c,d,e,f){b.service="FamilySearch",e.remove("recordseek-auth"),localStorage.clear(),c.fsRedirect=function(a){return f.redirectURL(a)},c.goSearch=function(){b.setCookie("recordseek-auth",angular.toJson(b.data)),d.path("/fs-search")}}]);var FamilySearch=function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){function d(a){return function(b,c,d){"function"==typeof c&&(d=c,c={}),c.method=a,this.request(b,c,d)}}var e=c(1),f=c(2),g=c(3),h=c(4),i=c(5),j=c(13),k=function(a){this.appKey="",this.environment="integration",this.redirectUri="",this.tokenCookie="FS_AUTH_TOKEN",this.maxThrottledRetries=10,this.saveAccessToken=!1,this.accessToken="",this.jwt="",this.middleware={request:[i.url,i.defaultAcceptHeader,i.authorizationHeader,i.disableAutomaticRedirects,i.body],response:[j.redirect,j.throttling,j.json]},this.config(a)};k.prototype.config=function(a){if(this.appKey=a.appKey||this.appKey,this.environment=a.environment||this.environment,this.redirectUri=a.redirectUri||this.redirectUri,this.tokenCookie=a.tokenCookie||this.tokenCookie,this.tokenCookiePath=a.tokenCookiePath||this.tokenCookiePath,this.maxThrottledRetries=a.maxThrottledRetries||this.maxThrottledRetries,this.saveAccessToken=!0===a.saveAccessToken||this.saveAccessToken,a.accessToken&&this.setAccessToken(a.accessToken),Array.isArray(a.pendingModifications)&&a.pendingModifications.length>0&&this.addRequestMiddleware(i.pendingModifications(a.pendingModifications)),parseInt(a.requestInterval,10)&&this.addRequestMiddleware(i.requestInterval(parseInt(a.requestInterval,10))),a.saveAccessToken&&!this.getAccessToken()){var b=e.get(this.tokenCookie);b&&this.setAccessToken(b)}},k.prototype.oauthRedirect=function(a){window.location.href=this.oauthRedirectURL(a)},k.prototype.oauthRedirectURL=function(a){var b=this.identHost()+"/cis-web/oauth2/v3/authorization?response_type=code&scope=openid profile email qualifies_for_affiliate_account country&client_id="+this.appKey+"&redirect_uri="+this.redirectUri;return a&&(b+="&state="+a),b},k.prototype.oauthResponse=function(a,b){1===arguments.length&&(b=a,a=void 0);var c=h.getParameterByName("state");if(a&&a!==c)return!1;var d=h.getParameterByName("code")
;return!!d&&(this.oauthToken(d,b),!0)},k.prototype.oauthToken=function(a,b){var c=this;c.post(c.identHost()+"/cis-web/oauth2/v3/token",{body:{grant_type:"authorization_code",code:a,client_id:c.appKey,redirect_uri:this.redirectUri},headers:{"Content-Type":"application/x-www-form-urlencoded"}},function(a,d){c.jwt=d.data.id_token,c.processOauthResponse(a,d,b)})},k.prototype.oauthUnauthenticatedToken=function(a,b){var c=this;c.post(c.identHost()+"/cis-web/oauth2/v3/token",{body:{grant_type:"unauthenticated_session",ip_address:a,client_id:c.appKey},headers:{"Content-Type":"application/x-www-form-urlencoded"}},function(a,d){c.processOauthResponse(a,d,b)})},k.prototype.oauthPassword=function(a,b,c){var d=this;this.post(this.identHost()+"/cis-web/oauth2/v3/token",{body:{grant_type:"password",client_id:this.appKey,username:a,password:b},headers:{"Content-Type":"application/x-www-form-urlencoded"}},function(a,b){d.processOauthResponse(a,b,c)})},k.prototype.processOauthResponse=function(a,b,c){b&&200===b.statusCode&&b.data&&this.setAccessToken(b.data.access_token),c&&setTimeout(function(){c(a,b)})},k.prototype.setAccessToken=function(a){return this.accessToken=a,this.saveAccessToken&&e.set(this.tokenCookie,a,{expires:1,path:this.tokenCookiePath}),this},k.prototype.getAccessToken=function(){return this.accessToken},k.prototype.deleteAccessToken=function(){return this.accessToken=void 0,this.saveAccessToken&&e.remove(this.tokenCookie,{path:this.tokenCookiePath}),this},k.prototype.addRequestMiddleware=function(a){return this.middleware.request.push(a),this},k.prototype.addResponseMiddleware=function(a){return this.middleware.response.push(a),this},k.prototype.get=d("GET"),k.prototype.post=d("POST"),k.prototype.head=d("HEAD"),k.prototype.delete=d("DELETE"),k.prototype.request=function(a,b,c){"function"==typeof b&&(c=b,b={}),this._execute(new f(a,b,c),c)},k.prototype._execute=function(a,b){function c(c,e){c?setTimeout(function(){b(c)}):d._runResponseMiddleware(a,e,function(a){setTimeout(function(){a?b(a):b(void 0,e)})})}var d=this;d._runRequestMiddleware(a,function(b,d){b||d?c(b,d):g(a,c)})},k.prototype._runRequestMiddleware=function(a,b){var c=this;h.asyncEach(this.middleware.request,function(d,e){d(c,a,function(a,c){a||c?b(a,c):e()})},b)},k.prototype._runResponseMiddleware=function(a,b,c){var d=this;h.asyncEach(this.middleware.response,function(e,f){e(d,a,b,function(a,b){a?c(a):void 0===b&&f()})},c)},k.prototype.identHost=function(){switch(this.environment){case"production":return"https://ident.familysearch.org";case"beta":return"https://identbeta.familysearch.org";default:return"https://identint.familysearch.org"}},k.prototype.platformHost=function(){switch(this.environment){case"production":return"https://api.familysearch.org";case"beta":return"https://beta.familysearch.org";default:return"https://api-integ.familysearch.org"}},a.exports=k},function(a,b,c){var d,e;!function(f){var g=!1;if(d=f,void 0!==(e="function"==typeof d?d.call(b,c,b,a):d)&&(a.exports=e),g=!0,a.exports=f(),g=!0,!g){var h=window.Cookies,i=window.Cookies=f();i.noConflict=function(){return window.Cookies=h,i}}}(function(){function a(){for(var a=0,b={};a<arguments.length;a++){var c=arguments[a];for(var d in c)b[d]=c[d]}return b}function b(c){function d(b,e,f){var g;if("undefined"!=typeof document){if(arguments.length>1){if(f=a({path:"/"},d.defaults,f),"number"==typeof f.expires){var h=new Date;h.setMilliseconds(h.getMilliseconds()+864e5*f.expires),f.expires=h}f.expires=f.expires?f.expires.toUTCString():"";try{g=JSON.stringify(e),/^[\{\[]/.test(g)&&(e=g)}catch(a){}e=c.write?c.write(e,b):encodeURIComponent(String(e)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),b=encodeURIComponent(String(b)),b=b.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),b=b.replace(/[\(\)]/g,escape);var i="";for(var j in f)f[j]&&(i+="; "+j,!0!==f[j]&&(i+="="+f[j]));return document.cookie=b+"="+e+i}b||(g={});for(var k=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,m=0;m<k.length;m++){var n=k[m].split("="),o=n.slice(1).join("=");this.json||'"'!==o.charAt(0)||(o=o.slice(1,-1));try{var p=n[0].replace(l,decodeURIComponent);if(o=c.read?c.read(o,p):c(o,p)||o.replace(l,decodeURIComponent),this.json)try{o=JSON.parse(o)}catch(a){}if(b===p){g=o;break}b||(g[p]=o)}catch(a){}}return g}}return d.set=d,d.get=function(a){return d.call(d,a)},d.getJSON=function(){return d.apply({json:!0},[].slice.call(arguments))},d.defaults={},d.remove=function(b,c){d(b,"",a(c,{expires:-1}))},d.withConverter=b,d}return b(function(){})})},function(a,b){var c=function(a,b,c){this.url=a,this.callback=c||function(){},this.method="GET",this.headers={},this.retries=0,this.options={};var d;for(d in b)if(b.hasOwnProperty(d))switch(d){case"method":case"body":case"retries":this[d]=b[d];break;case"headers":this.headers=JSON.parse(JSON.stringify(b.headers));break;default:this.options[d]=b[d]}};c.prototype.hasHeader=function(a){return void 0!==this.headers[a]},c.prototype.setHeader=function(a,b){return this.headers[a]=b,this},c.prototype.getHeader=function(a){return this.headers[a]},c.prototype.getHeaders=function(){return this.headers},c.prototype.isPlatform=function(){return-1!==this.url.indexOf("/platform/")},a.exports=c},function(a,b){function c(a,b){for(var c,e={};c=d.exec(a.getAllResponseHeaders());)e[c[1].toLowerCase()]=c[2];return{statusCode:a.status,statusText:a.statusText,headers:e,originalUrl:b.url,effectiveUrl:b.url,redirected:!1,requestMethod:b.method,requestHeaders:b.headers,body:a.responseText,retries:0,throttled:!1}}var d=/^(.*?):[ \t]*([^\r\n]*)$/gm;a.exports=function(a,b){var d=new XMLHttpRequest;d.open(a.method,a.url);var e=a.getHeaders();for(var f in e)e.hasOwnProperty(f)&&d.setRequestHeader(f,e[f]);d.onload=function(){var e=c(d,a);setTimeout(function(){b(null,e)})},d.onerror=function(a){setTimeout(function(){b(a)})},d.send(a.body)}},function(a,b){a.exports={urlEncode:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},getParameterByName:function(a){var b=RegExp("[?&]"+a+"=([^&]*)").exec(window.location.search);return b&&decodeURIComponent(b[1].replace(/\+/g," "))},asyncEach:function(a,b,c){function d(e){e===a.length?setTimeout(c):b(a[e],function(){setTimeout(function(){d(++e)})})}d(0)}}},function(a,b,c){a.exports={authorizationHeader:c(6),body:c(7),defaultAcceptHeader:c(8),disableAutomaticRedirects:c(9),pendingModifications:c(10),requestInterval:c(11),url:c(12)}},function(a,b){a.exports=function(a,b,c){!b.hasHeader("Authorization")&&a.getAccessToken()&&b.isPlatform()&&b.setHeader("Authorization","Bearer "+a.getAccessToken()),c()}},function(a,b,c){var d=c(4);a.exports=function(a,b,c){!b.body||"POST"!==b.method&&"PUT"!==b.method||(!b.hasHeader("Content-Type")&&b.isPlatform()&&b.setHeader("Content-Type","application/x-fs-v1+json"),"string"!=typeof b.body&&(b.hasHeader("Content-Type")&&-1!==b.getHeader("Content-Type").indexOf("json")?b.body=JSON.stringify(b.body):b.body=d.urlEncode(b.body))),c()}},function(a,b){a.exports=function(a,b,c){!b.hasHeader("Accept")&&b.isPlatform()&&b.setHeader("Accept","application/x-fs-v1+json"),c()}},function(a,b){a.exports=function(a,b,c){!b.hasHeader("X-Expect-Override")&&b.isPlatform()&&b.setHeader("X-Expect-Override","200-ok"),c()}},function(a,b){a.exports=function(a){var b=a.join(",");return function(a,c,d){c.headers["X-FS-Feature-Tag"]=b,d()}}},function(a,b){a.exports=function(a){function b(a){i.push(a),c()}function c(){g||(g=setInterval(d,a))}function d(){if(!f())if(i.length){var a=i.shift();e(a)}else g&&clearInterval(g)}function e(a){h=Date.now(),a()}function f(){return Date.now()-h<a}var g,h=0,i=[];return function(a,c,d){i.length||f()?b(d):e(d)}}},function(a,b){a.exports=function(a,b,c){-1===b.url.indexOf("https://")&&(b.url=a.platformHost()+b.url),c()}},function(a,b,c){a.exports={json:c(14),redirect:c(15),throttling:c(16)}},function(a,b){a.exports=function(a,b,c,d){var e=c.headers["content-type"];if(e&&-1!==e.indexOf("json"))try{c.data=JSON.parse(c.body)}catch(a){}d()}},function(a,b){a.exports=function(a,b,c,d){var e=c.headers.location;if(b.options.followRedirect&&e&&e!==b.url){var f=b.url;return b.url=c.headers.location,a._execute(b,function(a,c){c&&(c.originalUrl=f,c.redirected=!0),setTimeout(function(){b.callback(a,c)})}),d(void 0,!0)}d()}},function(a,b){a.exports=function(a,b,c,d){if(429===c.statusCode&&b.retries<a.maxThrottledRetries){var e=1e3*parseInt(c.headers.retry||c.headers["retry-after"],10)||1e3;return setTimeout(function(){a._execute(b,function(a,c){c.throttled=!0,c.retries=++b.retries,setTimeout(function(){b.callback(a,c)})})},e),d(void 0,!0)}d()}}]);angular.module("recordseekApp").provider("fsAPI",["_",function(a){"http://recordseek.com"===document.location.origin||"https://recordseek.com"===document.location.origin?this.environment="production":this.environment="beta",this.environment="production","sandbox"===this.environment?this.client_id="a0T3000000ByxnUEAR":this.client_id="S1M9-QH77-ZGJK-2HB1-MYZZ-6YN9-SBNQ-6YPS",this.redirect_uri=document.location.origin,"http://localhost:9000"!==document.location.origin&&"http://localhost:9001"!==document.location.origin&&(this.redirect_uri+="/share/"),this.$get=["$window","$http","$q","$timeout","$rootScope","$injector","$location",function(a,b,c,d,e,f,g){if(this.client_id&&this.environment&&this.redirect_uri){this.getEnvironment=function(){return this.environment},b.defaults.useXDomain=!0,delete b.defaults.headers.common["X-Requested-With"],this.client=new FamilySearch({appKey:this.client_id,environment:this.environment,redirectUri:this.redirect_uri,saveAccessToken:!0,http_function:b,deferred_function:c.defer,auto_expire:!0,timeout_function:d});var h=this,i=FamilySearch.prototype.oauthRedirectURL;if(FamilySearch.prototype.oauthRedirectURL=function(){return e.setCookie("recordseek-auth",angular.toJson(e.data)),i.apply(this)},this.client.handleError=function(a,b,c){var d="";if(a)d="Network Error";else if(b.statusCode>=500)d="Oops, it's not you, neither us, I suspect it is the problem of FamilySearch. Please try again.",c=void 0;else{if(401==b.statusCode){var f=document.URL.split("#");e.helpers.decodeQueryString(f[0]);return h.client.getAccessToken()&&"undefined"!=h.client.getAccessToken()?h.client.completeLogout().then(function(){location.href=h.client.oauthRedirectURL()}):location.href=h.client.oauthRedirectURL(),!0}if(b.statusCode>=400)if(void 0!==b.body&&b.body){var g=JSON.parse(b.body);d="The FamilySearch API returned the following error: \n"+g.errors[0].stacktrace}else d="Ouch, looks like an another change in Family Search API. Please contact support and let us know!"}return""!==d&&(void 0===c&&alert(d),!0)},this.client.displayUser=function(a){e.user||(h.client.getAccessToken()&&"undefined"!=h.client.getAccessToken()?h.client.get("/platform/users/current",{Header:{Authorization:"Bearer "+h.client.getAccessToken()}},function(b,c){h.client.handleError(b,c)||(b||c.data.errors?(b&&console.error(b),c.data.errors&&c.data.errors.forEach(function(a){console.error(a)}),h.client.deleteAccessToken(),location.href=h.client.oauthRedirectURL()):c.data&&c.data.users&&c.data.users.length>0&&(e.user=c.data.users[0],a.user=e.user,e.log(a.user),a.$apply(),h.client.fetchCollections(a)))}):location.href=h.client.oauthRedirectURL()),h.client.fetchCollections(a)},h.client.fetchCollections=function(a){!e.sourcebox&&e.user&&e.user.id&&e.user.personId&&(a.getSourceBoxes=!0,e.data.sourcebox="",a.sourcebox={"Home (Unorganized)":"",RecordSeek:"CREATE"},h.client.get("/platform/sources/"+e.user.id+"/collections",{Header:{Authorization:"Bearer "+h.client.getAccessToken()}},function(b,c){if(!h.client.handleError(b,c)){var d=[];c&&c.data&&(d=c.data.collections);var f={};angular.forEach(d,function(a){""!=a.title&&(f[a.title]="/platform/sources/collections/"+a.id)},f),f.RecordSeek||(f.RecordSeek="CREATE");var g={"Home (Unorganized)":""};Object.keys(f).sort().forEach(function(a){g[a]=f[a]}),e.sourcebox=g,e.log(e.sourcebox),a.sourcebox=e.sourcebox,a.getSourceBoxes=!1}}))},this.client.createSourceDescription=function(a){var b={};return a.about&&(b.about=a.about),a.citation&&(b.citations=[],b.citations.push({value:a.citation})),a.title&&(b.titles=[],b.titles.push({value:a.title})),a.text&&(b.notes=[],b.notes.push({text:a.text})),a.changeMessage&&(b.attribution={},b.attribution.changeMessage=a.changeMessage,e.user&&e.user.id&&(b.attribution.contributor={resource:"https://api.familysearch.org/platform/users/agents/"+e.user.id,resourceId:e.user.id})),new Promise(function(a,c){h.client.post("/platform/sources/descriptions",{Header:{Authorization:"Bearer "+h.client.getAccessToken()},body:{sourceDescriptions:[b]}},function(b,d){return h.client.handleError(b,d)?c(b):a(d)})})},this.client.createCollection=function(a){var b={};return Object.assign(b,{},a),new Promise(function(a,c){h.client.post("/platform/sources/collections",{Header:{Authorization:"Bearer "+h.client.getAccessToken()},body:{collections:[b]}},function(b,d){return h.client.handleError(b,d)?c(b):a(d)})})},this.client.completeLogout=function(){return localStorage.clear(),new Promise(function(a,b){h.client.post("/platform/logout",{Header:{Authorization:"Bearer "+h.client.getAccessToken()}},function(c,d){return 0==h.client.handleError(c,d)&&c?b(c):(h.client.deleteAccessToken(),delete e.user,a(d))})})},this.client.user=function(){return e.user||h.client.get("/platform/users/current",{Header:{Authorization:"Bearer "+h.client.getAccessToken()}},function(a,b){if(h.client.handleError(a,response))return void console.log(a,response);b.data&&b.data.users&&b.data.users.length>0&&(e.user=b.data.users[0],$scope.user=e.user,e.log($scope.user),$scope.$apply())}),e.user},this.client.getCollectionsForUser=function(){return new Promise(function(a,b){e.user&&e.user.personId||b(null),h.client.get("/platform/sources/collections",{Header:{Authorization:"Bearer "+h.client.getAccessToken()}},function(c,d){return h.client.handleError(c,d)?b(c):a(d)})})},this.client.moveSourceDescriptionsToCollection=function(a,b){return new Promise(function(c,d){h.client.post(a,{Header:{Authorization:"Bearer "+h.client.getAccessToken()},body:{sourceDescriptions:[b]}},function(a,b){return h.client.handleError(a,b)?d(a):c(b)})})},this.client.createPersonSourceRef=function(a,b,c,d){var e={sources:[{attribution:b,description:"https://api.familysearch.org/platform/sources/descriptions/"+c,tags:d}]};return new Promise(function(b,c){h.client.post("/platform/tree/persons/"+a,{Header:{Authorization:"Bearer "+h.client.getAccessToken()},body:{persons:[e]}},function(a,d){return h.client.handleError(a,d)?c(a):b(d)})})},this.urlParams=RecordSeek.helpers.decodeQueryString(document.URL),this.urlParams.code){e.status="Authenticating, please wait.",g.path("/loading");var j=document.location.origin+"/#!/fs-source";"http://recordseek.com"!==document.location.origin&&"https://recordseek.com"!==document.location.origin||(j=document.location.origin+"/share/#!/fs-source");var k=j;this.client.getAccessToken()||this.client.oauthToken(this.urlParams.code,function(a,b){(a||b.statusCode>=400)&&e.log(a),h.client.setAccessToken(b.data.access_token),window.location=k})}e.fsURL="https://api.familysearch.org"}return this.client}]}]),angular.module("ErrorCatcher",[]).factory("errorHttpInterceptor",["$q",function(a){return{responseError:function(b){return Raven.captureException(new Error("HTTP response error"),{extra:{config:b.config,status:b.status}}),a.reject(b)}}}]).config(["$httpProvider",function(a){a.interceptors.push("errorHttpInterceptor")}]),angular.module("recordseekApp").controller("ASourceCtrl",["$rootScope","$location","$scope","$window","$cookies","$http",function(a,b,c,d,e,f){a.service="Ancestry",c.clearMediaURL=function(){a.data.media_url=""},void 0===a.data.media_url&&(a.data.media_url="https://recordseek.com/assets/images/ancestry.jpg"),c.goNext=function(){a.debug&&e.remove("recordseek");a.data.citation,a.data.url,a.data.notes,a.data.media_url,a.data.domain,a.data.domain,a.data.title;return a.data.title=String(a.data.title).replace(/<[^>]+>/gm,""),a.track({eventCategory:"Ancestry",eventAction:"Source",eventLabel:"https://www.ancestry.com/savetoancestry/"}),!1},c.sourceFormats=a.sourceFormats,c.sourceFormat=a.data.sourceFormat,c.changeFormat=function(){a.setCitationFormat(c.sourceFormat)},c.goBack=function(){a.service="",e.remove("recordseek-last-service"),b.path("/")}}]),angular.module("recordseekApp").controller("FsResultsCtrl",["$rootScope","$location","$scope","fsAPI","fsUtils","fsResult",function(a,b,c,d,e,f){a.service="FamilySearch",c.currentPage=1,c.bigTotalItems=0,c.index=1,c.maxSize=0,c.numPages=1,d.displayUser(c),c.goBack=function(){a.track({eventCategory:"FamilySearch",eventAction:"Search",eventLabel:"Refine"}),b.path("/fs-search")},c.addPerson=function(){angular.equals({},a.personData)?b.path("/fs-addperson"):b.path("/fs-addattach")},c.createNow=function(){a.track({eventCategory:"FamilySearch",eventAction:"Create",eventLabel:"Now"}),delete a.data.attach,a.data.complete="noAttachment",b.path("/fs-create")},c.goNext=function(c,d,e){a.data.attach={pid:c,name:d,url:e,justification:""},a.track({eventCategory:"FamilySearch",eventAction:"Selected",eventLabel:c}),b.path("/fs-attach"),a.safeApply()},c.pageChanged=function(){c.currentPage>=26&&(c.bigTotalItems=390,c.currentPage=26,c.index=26),delete c.searchResults,c.getResults()},c.getResults=function(){var g=angular.copy(a.data.search);g.eventDate="";var h=["givenName","surname","spouseGivenName","spouseSurname","fatherGivenName","fatherSurname","motherGivenName","motherSurname","eventPlace"];angular.forEach(h,function(a){!0===g.advanced?g[a]+=!0!==g[a+"Exact"]&&""!==g[a]?"~":"":g[a]+=""!==g[a]?"~":""}),g.eventType&&(g.eventDateFrom&&""!==g.eventDateFrom&&(g[g.eventType+"Date.from"]="%2B"+g.eventDateFrom,h.push(g.eventType+"Date.from")),g.eventDateTo&&""!==g.eventDateTo&&(g[g.eventType+"Date.to"]="%2B"+g.eventDateTo,h.push(g.eventType+"Date.to")),g[g.eventType+"Place"]=g.eventPlace,h.push(g.eventType+"Place"));var i={};if(angular.forEach(h,function(a){-1!==h.indexOf(a)&&""!=g[a]&&(this[a]=g[a])},i),0!==Object.keys(i).length||a.debug||b.path("/fs-search"),c.context&&(i.context=c.context),c.min=15*c.currentPage-14,c.max=15*c.currentPage,c.min<1&&(c.min=1),c.bigTotalItems&&c.max>c.bigTotalItems&&(c.max=c.bigTotalItems),c.maxSize=5,a.data.search.pid&&""!==a.data.search.pid){var j=a.data.search.pid,k=d.get("/platform/tree/persons/"+j,{headers:{Accept:"application/x-gedcomx-v1+json",Authorization:"Bearer "+d.getAccessToken()}},function(b,g){if(!0===d.handleError(b,g,!1)&&delete g.data,c.searchResults=[],g.data){c.bigTotalItems=c.max=1,f.setData(a.data.search.pid,g.data);var h=f.getPrimaryPerson();h.confidence=5;try{h.father=e.getRelativeData(f.getFathers())}catch(b){a.log(b)}try{h.mother=e.getRelativeData(f.getMothers())}catch(b){a.log(b)}try{h.spouse=e.getRelativeData(f.getSpouses())}catch(b){a.log(b)}try{h.children=e.getRelativeData(f.getChildren())}catch(b){a.log(b)}c.searchResults.push(h),c.goNext(h.pid,h.name,h.url)}});if(void 0===k)return a.log("Error"),c.searchResults=[],void a.safeApply();k.catch(function(b){a.log("Error"),c.searchResults=[],a.safeApply()})}else{if(a.log("Non-PID Search"),c.searchContent)var i={start:15*(c.currentPage-1),context:c.searchContent};a.log(i);var l="";l=_.map(Object.entries(i),function(a){return"q."+a[0]+"="+a[1]}).join("&");var m=20*(c.currentPage-1);d.get("/platform/tree/search?"+l+"&count=20&offset="+m,{headers:{Accept:"application/x-gedcomx-atom+json",Authorization:"Bearer "+d.getAccessToken()}},function(b,g){if(!0===d.handleError(b,g,!1))return c.searchResults=[],void a.safeApply();c.searchResults=[];var h=g.data.entries;if(!h||0===h.length)return a.log("EMPTY"),void a.safeApply();if(c.bigTotalItems=g.data.results,c.currentPage>=26&&(c.bigTotalItems=390),c.max>c.bigTotalItems&&(c.max=c.bigTotalItems),a.log("Record length: "+h.length),0==h.length)c.searchResults.push(m),a.safeApply();else{for(var i=0,j=h.length;i<j;i++){var k=h[i].content.gedcomx;f.setData(h[i].id,k);var l=f.getPrimaryPerson(),m=_.cloneDeep(l);m.confidence=h[i].confidence,m.father=e.getRelativeData(f.getFathers()),m.mother=e.getRelativeData(f.getMothers()),m.spouse=e.getRelativeData(f.getSpouses()),m.children=e.getRelativeData(f.getChildren()),c.searchResults.push(m),a.safeApply()}a.log(c.searchResults)}a.track({eventCategory:"FamilySearch",eventAction:"Search",eventLabel:"Results",eventValue:h.length})},function(b){a.log(b),c.searchResults=[],a.safeApply()})}},c.getResults()}]),angular.module("recordseekApp").directive("resize",["$window",function(a){return function(b){var c=angular.element(a);b.$watch(function(){return{h:c.height(),w:c.width()}},function(a){b.windowHeight=a.h,b.windowWidth=a.w,b.style=function(){return{height:a.h-100+"px",width:a.w-100+"px"}}},!0),c.bind("resize",function(){b.$apply()})}}]),angular.module("recordseekApp").controller("FsCreateCtrl",["fsAPI","$rootScope","$scope","$location","fsUtils",function(a,b,c,d,e){function f(){c.status="Creating Person Profile for "+b.data.search.givenName1+" "+b.data.search.surname1,b.safeApply();var d=a.createPerson();b.toCreate.names&&angular.forEach(b.toCreate.names,function(a,b){d.$addName(a)}),b.toCreate.events&&angular.forEach(b.toCreate.events,function(a,b){d.$addFact(a)}),b.toCreate.gender&&d.$setGender(b.toCreate.gender),d.$save(b.attachMsg,!0).then(function(a){b.data.attach||(b.data.attach={}),b.data.attach.pid=a,b.data.attach.name=d.$getDisplayName(),b.data.attach.url=d.identifiers["http://gedcomx.org/Persistent"][0],delete b.toCreate,i()})}function g(){if(!b.data.sourceDescription&&b.data.url){c.status="Generating Source";var d=e.removeEmptyProperties({about:b.data.url.trim()?b.data.url.trim():"",citation:b.data.citation.trim()?b.data.citation.trim():"",title:b.data.title.trim()?b.data.title.trim():"",text:b.data.notes.trim()?b.data.notes.trim():"",changeMessage:b.attachMsg.trim()?b.attachMsg.trim():""});a.createSourceDescription(d).then(function(a){b.track({eventCategory:"FamilySearch",eventAction:"Source Created",eventLabel:a.headers["x-entity-id"]}),b.data.sourceDescription=d,b.data.sourceDescription.id=a.headers["x-entity-id"],h()})}else b.track({eventCategory:"FamilySearch",eventAction:"Source Attached to Another"}),h()}function h(){if(!b.data.sourcebox||""==b.data.sourcebox)return void i();c.status="Moving Source to Collection",b.safeApply(),"CREATE"==b.data.sourcebox?a.createCollection({title:"RecordSeek"}).then(function(c){b.data.sourcebox=b.sourcebox.RecordSeek=c.headers.location,a.moveSourceDescriptionsToCollection(b.data.sourcebox+"/descriptions",b.data.sourceDescription).then(function(a){i()})}):a.moveSourceDescriptionsToCollection(b.data.sourcebox+"/descriptions",b.data.sourceDescription).then(function(a){i()})}function i(){if(!b.data.attach)return d.path("/fs-complete"),b.safeApply();if(b.toCreate)return void f();if(b.data.sourceDescription&&"noAttachment"==b.data.complete)return delete b.data.attach,d.path("/fs-complete"),b.safeApply();delete b.data.complete,b.data.attach.name=b.data.attach.name?b.data.attach.name:"this Profile",c.status="Attaching Source to "+b.data.attach.name,b.safeApply();var e={changeMessage:b.data.attach.justification?b.data.attach.justification:"Attached by RecordSeek"},g=[];angular.forEach(b.data.tags,function(a,b){!0===a&&this.push({resource:"http://gedcomx.org/"+b.charAt(0).toUpperCase()+b.slice(1)})},g),a.createPersonSourceRef(b.data.attach.pid,e,b.data.sourceDescription.id,g).then(function(a){var c=a.headers["x-entity-id"];b.track({eventCategory:"FamilySearch",eventAction:"Source Attached",eventLabel:c}),b.data.complete=b.data.attach,b.data.complete.sourceRef=c,delete b.data.attach,d.path("/fs-complete"),b.safeApply()})}b.service="FamilySearch",b.data.attach||"noAttachment"==b.data.complete||d.path("/fs-search"),a.displayUser(c),g()}]),angular.module("recordseekApp").factory("fsUtils",["_","$q","fsAPI","$rootScope",function(a,b,c,d){return{removeEmptyProperties:function(b){return a.omit(b,function(b){return a.isEmpty(b)&&0!==b})},getPrimaryPerson:function(a){return{pid:a.getId(),name:a.getDisplayName(),birthDate:a.getBirthDate(),gender:a.getDisplayGender(),url:this.redirectURL(a.getId()),birthPlace:a.getBirthPlace(),deathDate:a.getDeathDate(),deathPlace:a.getDeathPlace()}},redirectURL:function(a){return d.fsURL.replace("api.","www.")+"/tree/person/details/"+a},getLocation:function(a){return c.getPlacesSearch({name:a,count:10}).then(function(a){for(var b=[],c=a.getSearchResults(),d=0;d<c.length;d++){var e=c[d].getPlace();b.push(e.getFullName())}return b})},getDate:function(a){return c.getDate(a).then(function(a){var b=a.getDate();if(b.normalized)return-1!=b.normalized.indexOf("/")?(b.normalized=b.normalized.split("/"),b.normalized):[b.normalized]})},getRelativeData:function(a){for(var b=[],c=0,d=a.length;c<d;c++)a[c].living||b.push({pid:a[c].id,url:this.redirectURL(a[c].id),name:a[c].display.name,gender:a[c].display.gender,data:a[c]});return b},getCurrentUser:function(){c.getCurrentUser().then(function(a){return a.getUser()})},setService:function(){return"FamilySearch"},langTemplates:function(){return["Standard","Spanish","Portuguese","Cyrillic","Chinese","Japanese","Khmer","Korean","Mongolian","Thai","Vietnamese"]},langTemplatesExpanded:function(){var a=this.langTemplates();return"Cyrillic"==$template?($scope.title1="Cyrillic",$scope.title2="Roman"):"Chinese"==$template?($scope.title1="Hanzi",$scope.title2="Roman"):"Japanese"==$template?($scope.title1="Kanji",$scope.title2="Kana",$scope.title3="Roman"):"Khmer"==$template?($scope.title1="Khmer",$scope.title2="Roman"):"Korean"==$template?($scope.title1="Hangul",$scope.title2="Hanja",$scope.title3="Roman"):"Mongolian"==$template?($scope.title1="Mongolian",$scope.title2="Roman"):"Thai"==$template?($scope.title1="Thai",$scope.title2="Roman"):"Vietnamese"==$template&&($scope.title1="Vietnamese",$scope.title2="Roman"),a},cleanSearch:function(a){return a.givenName&&!a.givenName1&&(a.givenName1=a.givenName),a.surname&&!a.surname1&&(a.surname1=a.surname),"birth"!=a.eventType||a.birthDate||a.birthPlace||(a.birthPlace||(a.birthPlace=a.eventPlace),a.birthDate||!a.eventDateFrom&&!a.eventDateTo||(a.eventDateFrom&&a.eventDateTo?a.eventDateFrom==a.eventDateTo?a.birthDate=a.eventDateFrom:a.birthDate=a.eventDateFrom+"-"+a.eventDateTo:a.eventDateFrom?a.birthDate=a.eventDateFrom:a.eventDateTo&&(a.birthDate=a.eventDateTo))),"death"!=a.eventType||a.deathDate||a.deathPlace||(a.deathPlace||(a.deathPlace=a.eventPlace),a.deathDate||!a.eventDateFrom&&!a.eventDateTo||(a.eventDateFrom&&a.eventDateTo?a.eventDateFrom==a.eventDateTo?a.deathDate=a.eventDateFrom:a.deathDate=a.eventDateFrom+"-"+a.eventDateTo:a.eventDateFrom?a.deathDate=a.eventDateFrom:a.eventDateTo&&(a.deathDate=a.eventDateTo)),(a.deathPlace||a.deathDate)&&(a.status="Deceased")),"burial"==a.eventType&&(a.eventPlace||a.eventDateFrom||a.eventDateTo)&&(a.status="Deceased"),a.langTemplate||(a.langTemplate="Standard"),a.gender||(a.gender="Unknown"),a}}}]),angular.module("recordseekApp").factory("fsResult",["_","$q","$rootScope",function(a,b,c){var d=null,e=null,f=null,g={};return g.setData=function(b,c){e=b,d=a.cloneDeep(c)},g.getPrimaryPerson=function(){var a=this.getPersons(d);if(!a)return null;for(var b in a){var c=a[b];if(c.id===e)return f={pid:c.id,name:c.display.name,birthDate:c.birthDate||"",gender:c.display.gender,url:this.redirectURL(c.id),birthPlace:c.birthPlace||"",deathDate:c.deathDate||"",deathPlace:c.deathPlace||""}}return null},g.getPersons=function(){return d.persons},g.redirectURL=function(a){return c.fsURL.replace("api.","www.")+"/tree/person/details/"+a},g.getFathers=function(){var b=this.getPersons(),c=this.getParentRelationshipIDs();return a.filter(b,function(a){return c.includes(a.id)&&!1===a.gender.type.includes("Female")})},g.getMothers=function(){var b=this.getPersons(),c=this.getParentRelationshipIDs();return a.filter(b,function(a){return c.includes(a.id)&&a.gender.type.includes("Female")})},g.getParentRelationshipIDs=function(){var b=a.filter(d.relationships,function(a){return a.type.includes("ParentChild")&&a.person2.resourceId===f.pid});return a.map(b,"person1.resourceId")},g.getSpouses=function(){var b=this.getPersons(),c=this.getSpouseRelationshipIDs();return a.filter(b,function(a){c.includes(a.id)})},g.getSpouseRelationshipIDs=function(){var b=a.filter(d.relationships,function(a){return a.type.includes("Couple")&&a.person2.resourceId===f.pid});return a.map(b,"person1.resourceId")},g.getChildren=function(){var b=this.getPersons(),c=this.getChildrenRelationshipIDs();return a.filter(b,function(a){return c.includes(a.id)})},g.getChildrenRelationshipIDs=function(){var b=a.filter(d.relationships,function(a){return a.type.includes("ParentChild")&&a.person1.resourceId===f.pid});return a.map(b,"person2.resourceId")},g}]),angular.module("recordseekApp").run(["$templateCache",function(a){a.put("views/a-source.html",'<h3>Attach a Source <small> to Ancestry.com</small> </h3> <div class="row container-fluid"> <form ng-submit="goNext()" action="https://www.ancestry.com/savetoancestry/" method="POST"> <div class="form-group input-group-sm"> <label>Source Title</label> <input type="text" class="form-control" name="sourceTitle" ng-model="data.title" placeholder="Enter a title for this source" required> </div> <div class="form-group input-group-sm"> <label>Source <small>(URL)</small> </label> <input type="text" class="form-control" name="citationUrl" ng-model="data.url" placeholder="Enter a URL" required> </div> <div style="margin-bottom:5px"> <label style="margin-bottom:0">Source Media Image <small>(URL)</small> </label> </div> <div class="input-group input-group-sm" style="margin-top:0;margin-bottom:10px"> <input type="text" name="mediaUrl" class="form-control" ng-model="data.media_url" placeholder="Enter a URL of an image"> <span class="input-group-btn"> <button ng-click="clearMediaURL()" class="btn btn-default btn-secondary" type="button">Clear</button> </span> </div>\x3c!-- /input-group --\x3e <div class="form-group input-group-sm"> <label style="width:100%">Where the Record Is Found <small>(Citation)</small> <span style="display:block;float:right"><small>Format</small>: <select ng-model="sourceFormat" ng-change="changeFormat()"> <option ng-repeat="(key, obj) in sourceFormats" value="{{key}}"> {{key}} </option> </select> </span> </label> <textarea class="form-control" name="citationTitle" ng-model="data.citation" rows="3" required></textarea> </div> <div class="form-group input-group-sm" show-errors> <label>Describe the Record <small>(Notes)</small> </label> <textarea class="form-control" name="mediaNote" ng-model="data.notes" rows="3"></textarea> </div> <input type="hidden" name="repositoryDomain" ng-model="data.domain"> <input type="hidden" name="sourcePublishedDate" value=""> <input type="hidden" name="sourcePublishedLocation" value=""> <input type="hidden" name="sourcePublisherName" ng-model="data.domain"> <div class="text-right"> <a ng-click="goBack()" type="submit" class="btn btn-default pull-left"><i class="glyphicon glyphicon-arrow-left"></i>&nbsp;&nbsp; Go Back </a> &nbsp;&nbsp; <button type="submit" class="btn btn-primary">Next &nbsp;&nbsp;<i class="glyphicon glyphicon-arrow-right"></i> </button> </div> </form> </div>'),
a.put("views/about.html",'<h1>RecordSeek <small>- Sources Done Right</small> </h1> <div style="font-size: 1.2em"><p>Back in 2013 I was a CTO of Real-Time Collaboration, makers of FamilyInsight, AncestorSync, and SharingTime. I found a real need, with the new FamilySearch website, to make the process of adding sources much more simplified. I sat down and in a few weeks RecordSeek was created.</p> <p>For a time we used the name of TreeConnect, but TreeConnect was only ever a "product" of RecordSeek. To avoid confusion, we\'re going back to RecordSeek as the original name.</p> <p>We\'ve had some rough ups and downs, but now RecordSeek has been completely rewritten and is ready for the future!</p> <p>If you would like to integrate RecordSeek into your website, we\'re more than willing. We\'d just request you donate to the effort. You are welcome to contact me directly at <a href="mailto:me@dovy.io?subject=RecordSeek">me@dovy.io</a>.</p> <p>My hope is that RecordSeek makes your genealogy efforts easier. Your ancestors thank you for your efforts.</p> <blockquote>Dovy Paukstys<br> <small>Creator & Owner</small> </blockquote> </div>'),a.put("views/fs-addattach.html",'<span class="pull-right ng-hide text-muted hello-user" ng-show="user">Hello {{user.displayName}}! <a class="logout" ng-click="logout()">Not {{user.givenName}}?</a></span> <h3>Create a New Person & Attach Source <a class="btn btn-success pull-right btn-sm" id="sourceTags" popover-template="myPopover.templateUrl" popover-placement="left" popover-is-open="myPopover.isOpen" ng-click="myPopover.toggle()"><i class="glyphicon glyphicon-tags"></i> Tag this Source to Events <span class="badge">{{tagCount}}</span></a> <br> <small>Source: "{{data.title}}"</small> </h3> <div class="bs-callout bs-callout-info" id="callout-helper-context-color-specificity"> <a href class="btn btn-default btn-xs pull-right" ng-click="goBack()">Modify Person Data</a> <h4>Person to be Created</h4> <div class="row"> <div class="col-sm-4 col-xs-6" ng-repeat="item in toCreate"><strong ng-hide="!item.title">{{item.title}} <small class="ng-hide" ng-show="item.sub"> ({{item.sub}})</small> :</strong> <span ng-bind-html="item.value"></span></div> </div> </div> <div class="row"> <form class="col-xs-12" ng-submit="goNext()"> <div class="form-group" show-errors> <label>Reason to Attach this Source to this Person <small>(Optional)</small> </label> <textarea class="form-control" ng-model="data.attach.justification" rows="3">{{data.attach.justification}}</textarea> <span id="helpBlock" class="help-block">This will be useful for other patrons who see your source, and want to know why you attached this source.</span> </div> <div class="text-right"> <a ng-click="goBack()" type="submit" class="btn btn-default pull-left"><i class="glyphicon glyphicon-arrow-left"></i>&nbsp;&nbsp; Go Back </a> &nbsp;&nbsp; <button type="submit" class="btn btn-primary">Create<span class="hidden-xs"> & Attach</span></button> </div> </form> </div>'),a.put("views/fs-addperson.html",'<span class="pull-right ng-hide text-muted hello-user" ng-show="user">Hello {{user.displayName}}! <a class="logout" ng-click="logout()">Not {{user.givenName}}?</a></span> <h3>Create a New Person</h3> <form class="addPerson" ng-init="isDisabled = false" ng-submit="goNext()"> <div class="row hide"> <div class="col-xs-12 form-group"> <div class="btn-group" dropdown is-open="status.isopen"> <span class="btn-text btn-xs text-muted">Name Template:</span> <button type="button" class="btn btn-info btn-xs dropdown-toggle" dropdown-toggle ng-disabled="disabled"> {{data.search.langTemplate}}&nbsp;&nbsp;<span class="caret"></span> </button> <ul class="dropdown-menu" role="menu"> <li ng-repeat="value in langTemplates"> <a ng-click="changeTemplate(value)" href>{{value}}</a> </li> </ul> </div> </div> </div> <div class="row row1"> <div class="col-xs-1 rowTitle ng-hide" ng-class="(data.search.langTemplate == \'Vietnamese\' || data.search.langTemplate == \'Mongolian\') ? \'col-xs-2 rowTitle\' : \'col-xs-2 col-sm-1 rowTitle\'" ng-show="data.search.langTemplate == \'Chinese\' || data.search.langTemplate == \'Japanese\' || data.search.langTemplate == \'Cyrillic\' ||  data.search.langTemplate == \'Khmer\' ||  data.search.langTemplate == \'Korean\' ||  data.search.langTemplate == \'Mongolian\' ||  data.search.langTemplate == \'Thai\' ||  data.search.langTemplate == \'Vietnamese\'"> <div class="form-group text-muted"> {{prefix1}} </div> </div> <div ng-class="(data.search.langTemplate == \'Standard\' || data.search.langTemplate == \'Spanish\' || data.search.langTemplate == \'Portuguese\') ? \'col-sm-2 col-xs-4\' : \'col-sm-1 col-xs-5\'" ng-hide="data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Japanese\'"> <div class="form-group"> <label>Title</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.prefix1" class="form-control"> </div> </div> </div> <div class="col-sm-4 col-xs-6 ng-hide" ng-class="(data.search.langTemplate == \'Japanese\' || data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Thai\' || data.search.langTemplate == \'Vietnamese\') ? \'col-sm-5 col-xs-6\' : \'col-sm-4 col-xs-6\'" ng-show="data.search.langTemplate == \'Vietnamese\' || data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Khmer\' ||  data.search.langTemplate == \'Japanese\' ||  data.search.langTemplate == \'Chinese\'"> <div class="form-group"> <label>Last Names (Surname)</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.surname1" class="form-control"> </div> </div> </div> <div class="col-sm-4 col-xs-6" ng-class="data.search.langTemplate==\'Thai\' ? \'col-sm-5 col-xs-6\' : \'col-sm-4 col-xs-6\'"> <div class="form-group"> <label>Given Name(s)</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.givenName1" class="form-control"> </div> </div> </div> <div class="col-sm-4 col-xs-6" ng-class="(data.search.langTemplate == \'Japanese\' || data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Thai\' || data.search.langTemplate == \'Vietnamese\') ? \'col-sm-5 col-xs-6\' : \'col-sm-4 col-xs-6\'" ng-hide="data.search.langTemplate == \'Vietnamese\' || data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Khmer\' ||  data.search.langTemplate == \'Japanese\' ||  data.search.langTemplate == \'Chinese\'"> <div class="form-group"> <label>Last Names (Surname)</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.surname1" class="form-control"> </div> </div> </div> <div class="col-sm-2 col-xs-6" ng-hide="data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Vietnamese\' || data.search.langTemplate == \'Thai\'"> <div class="form-group"> <label>Suffix</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.suffix1" class="form-control"> </div> </div> </div> </div> <div class="row row2 ng-hide" ng-show="data.search.langTemplate != \'Standard\' && data.search.langTemplate != \'Spanish\' && data.search.langTemplate != \'Portuguese\'"> <div class="col-xs-1 rowTitle ng-hide" ng-class="(data.search.langTemplate == \'Vietnamese\' || data.search.langTemplate == \'Mongolian\') ? \'col-xs-2 rowTitle\' : \'col-xs-1 rowTitle\'" ng-show="data.search.langTemplate == \'Chinese\' || data.search.langTemplate == \'Japanese\' || data.search.langTemplate == \'Cyrillic\' ||  data.search.langTemplate == \'Khmer\' ||  data.search.langTemplate == \'Korean\' ||  data.search.langTemplate == \'Mongolian\' ||  data.search.langTemplate == \'Thai\' ||  data.search.langTemplate == \'Vietnamese\'"> <div class="form-group text-muted"> {{prefix2}} </div> </div> <div ng-class="(data.search.langTemplate == \'Standard\' || data.search.langTemplate == \'Spanish\' || data.search.langTemplate == \'Portuguese\') ? \'col-sm-2 col-xs-6\' : \'col-sm-1 col-xs-6\'" ng-hide="data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Japanese\'"> <div class="form-group"> <label>Title</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.prefix2" class="form-control"> </div> </div> </div> <div class="col-sm-4 col-xs-6 ng-hide" ng-class="(data.search.langTemplate == \'Japanese\' || data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Thai\' || data.search.langTemplate == \'Vietnamese\') ? \'col-sm-5 col-xs-6\' : \'col-sm-4 col-xs-6\'" ng-show="data.search.langTemplate == \'Vietnamese\' || data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Khmer\' ||  data.search.langTemplate == \'Japanese\' ||  data.search.langTemplate == \'Chinese\'"> <div class="form-group"> <label>Last Names (Surname)</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.surname2" class="form-control"> </div> </div> </div> <div class="col-sm-4 col-xs-6" ng-class="data.search.langTemplate==\'Thai\' ? \'col-sm-5 col-xs-6\' : \'col-sm-4 col-xs-6\'"> <div class="form-group"> <label>Given Name(s)</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.givenName2" class="form-control"> </div> </div> </div> <div class="col-sm-4 col-xs-6" ng-class="(data.search.langTemplate == \'Japanese\' || data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Thai\' || data.search.langTemplate == \'Vietnamese\') ? \'col-sm-5 col-xs-6\' : \'col-sm-4 col-xs-6\'" ng-hide="data.search.langTemplate == \'Vietnamese\' || data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Khmer\' ||  data.search.langTemplate == \'Japanese\' ||  data.search.langTemplate == \'Chinese\'"> <div class="form-group"> <label>Last Names (Surname)</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.surname2" class="form-control"> </div> </div> </div> <div class="col-sm-2 col-xs-6" ng-hide="data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Vietnamese\' || data.search.langTemplate == \'Thai\'"> <div class="form-group"> <label>Suffix</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.suffix2" class="form-control"> </div> </div> </div> </div> <div class="row row3 ng-hide" ng-show="data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Japanese\'"> <div class="col-xs-1 rowTitle ng-hide" ng-class="(data.search.langTemplate == \'Vietnamese\' || data.search.langTemplate == \'Mongolian\') ? \'col-xs-2 rowTitle\' : \'col-xs-1 rowTitle\'" ng-show="data.search.langTemplate == \'Chinese\' || data.search.langTemplate == \'Japanese\' || data.search.langTemplate == \'Cyrillic\' ||  data.search.langTemplate == \'Khmer\' ||  data.search.langTemplate == \'Korean\' ||  data.search.langTemplate == \'Mongolian\' ||  data.search.langTemplate == \'Thai\' ||  data.search.langTemplate == \'Vietnamese\'"> <div class="form-group text-muted"> {{prefix3}} </div> </div> <div ng-class="(data.search.langTemplate == \'Standard\' || data.search.langTemplate == \'Spanish\' || data.search.langTemplate == \'Portuguese\') ? \'col-sm-2 col-xs-6\' : \'col-sm-1 col-xs-6\'" ng-hide="data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Japanese\'"> <div class="form-group"> <label>Title</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.prefix3" class="form-control"> </div> </div> </div> <div class="col-sm-4 col-xs-6 ng-hide" ng-class="(data.search.langTemplate == \'Japanese\' || data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Thai\' || data.search.langTemplate == \'Vietnamese\') ? \'col-sm-5 col-xs-6\' : \'col-sm-4 col-xs-6\'" ng-show="data.search.langTemplate == \'Vietnamese\' || data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Khmer\' ||  data.search.langTemplate == \'Japanese\' ||  data.search.langTemplate == \'Chinese\'"> <div class="form-group"> <label>Last Names (Surname)</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.surname3" class="form-control"> </div> </div> </div> <div class="col-sm-4 col-xs-6" ng-class="data.search.langTemplate==\'Thai\' ? \'col-sm-5 col-xs-6\' : \'col-sm-4 col-xs-6\'"> <div class="form-group"> <label>Given Name(s)</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.givenName3" class="form-control"> </div> </div> </div> <div class="col-sm-4 col-xs-6" ng-class="(data.search.langTemplate == \'Japanese\' || data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Thai\' || data.search.langTemplate == \'Vietnamese\') ? \'col-sm-5 col-xs-6\' : \'col-sm-4 col-xs-6\'" ng-hide="data.search.langTemplate == \'Vietnamese\' || data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Korean\' || data.search.langTemplate == \'Khmer\' ||  data.search.langTemplate == \'Japanese\' ||  data.search.langTemplate == \'Chinese\'"> <div class="form-group"> <label>Last Names (Surname)</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.surname3" class="form-control"> </div> </div> </div> <div class="col-sm-2 col-xs-6" ng-hide="data.search.langTemplate == \'Mongolian\' || data.search.langTemplate == \'Vietnamese\' || data.search.langTemplate == \'Thai\'"> <div class="form-group"> <label>Suffix</label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.suffix3" class="form-control"> </div> </div> </div> </div> <div class="row"> <div class="col-xs-6"> <div class="form-group input-group-sm"> <label>Gender </label> <select class="form-control" ng-disabled="data.search.pid" ng-model="data.search.gender"> <option value="Male">Male</option> <option value="Female">Female</option> <option value="Unknown" selected>Unknown</option> </select> </div> </div> <div class="col-xs-6"> <div class="form-group input-group-sm"> <div class="radio"> <label> <input type="radio" name="status" ng-model="data.search.status" value="Living" required> Living </label> </div> <div class="radio"> <label> <input type="radio" name="status" ng-model="data.search.status" value="Deceased" required> Deceased </label> </div> </div> </div> </div> <div class="row"> <div class="col-xs-6"> <div class="form-group input-group-sm"> <label>Date of Birth</label><br> <input type="text" class="form-control birthDate" placeholder="" ng-disabled="data.search.pid" ng-model="data.search.birthDate" typeahead-wait-ms="650" typeahead="date for date in getDate($viewValue)" typeahead-template-url2="dateResponseTemplate.html" typeahead-input-formatter2="$model.normalized"> </div> </div> <div class="col-xs-6"> <div class="form-group"> <label>Birthplace </label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.birthPlace" typeahead-wait-ms="650" typeahead="address for address in getLocation($viewValue)" class="form-control"> </div> </div> </div> </div> <div class="row"> <div class="col-xs-6"> <div class="form-group input-group-sm"> <label>Date of Death</label><br> <input type="text" class="form-control deathDate" placeholder="" ng-disabled="data.search.pid || data.search.status == \'Living\'" ng-model="data.search.deathDate" typeahead-wait-ms="650" typeahead="date for date in getDate($viewValue)" typeahead-template-url2="dateResponseTemplate.html" typeahead-input-formatter2="$model.normalized"> </div> </div> <div class="col-xs-6"> <div class="form-group"> <label>Place of Death </label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid || data.search.status == \'Living\'" ng-model="data.search.deathPlace" typeahead-wait-ms="650" typeahead="address for address in getLocation($viewValue)" class="form-control"> </div> </div> </div> </div> <div class="row hide"> <div class="col-xs-12"> <div class="form-group"> <a class="btn btn-default btn-xs" ng-click="isCollapsed = !isCollapsed"> <i ng-class="!isCollapsed ? \'glyphicon glyphicon-chevron-down\' : \'glyphicon glyphicon-chevron-up\'" class="glyphicon glyphicon-chevron-down"></i> Additional Relationships </a> </div> </div> </div> <div class="hide" collapse="!isCollapsed"> <div class="row"> <div class="col-xs-6"> <div class="form-group"> <label>Mother\'s Given<span class="hidden-xs"> Name(s)</span> </label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.motherGivenName"> </div> </div> </div> <div class="col-xs-6"> <div class="form-group"> <label>Mother\'s Surname </label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.motherSurname"> </div> </div> </div> </div> <div class="row"> <div class="col-xs-6"> <div class="form-group"> <label>Father\'s Given<span class="hidden-xs"> Name(s)</span></label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.fatherGivenName"> </div> </div> </div> <div class="col-xs-6"> <div class="form-group"> <label>Father\'s Surname </label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.fatherSurname"> </div> </div> </div> </div> <div class="row"> <div class="col-xs-6"> <div class="form-group"> <label>Spouse\'s Given<span class="hidden-xs"> Name(s)</span> </label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.spouseGivenName"> </div> </div> </div> <div class="col-xs-6"> <div class="form-group"> <label>Spouse\'s Surname </label> <div class="form-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.spouseSurname"> </div> </div> </div> </div> </div> <div class="text-right"> <a ng-click="goBack()" type="submit" class="btn btn-default pull-left"><i class="glyphicon glyphicon-arrow-left"></i>&nbsp;&nbsp; Go Back </a> <span class="hidden-xs"><a class="btn btn-link" ng-click="advancedSearch()">{{advancedButtonText}}</a> &nbsp;&nbsp;</span> <button type="submit" class="btn btn-primary">Next &nbsp;&nbsp;<i class="glyphicon glyphicon-arrow-right"></i></button> </div> </form> <script type="text/ng-template" id="dateResponseTemplate.html"><a data-formal="{{match.model.formal}}">\n        <span bind-html-unsafe="match.model.normalized | typeaheadHighlight:query">{{match.model.normalized}}</span>\n    </a><\/script>'),a.put("views/fs-attach.html",'<span class="pull-right ng-hide text-muted hello-user" ng-show="user">Hello {{user.displayName}}! <a class="logout" ng-click="logout()">Not {{user.givenName}}?</a></span> <h3>Attach Source to <a href="{{data.attach.url}}" target="_blank" popover-placement="top" popover="View on FamilySearch" popover-trigger="mouseenter">{{data.attach.name}}</a> <a class="btn btn-success pull-right btn-sm" id="sourceTags" popover-template="myPopover.templateUrl" popover-placement="left" popover-is-open="myPopover.isOpen" ng-click="myPopover.toggle()"><i class="glyphicon glyphicon-tags"></i> Tag this Source to Events <span class="badge">{{tagCount}}</span></a> <br> <small>Source: "{{data.title}}"</small> </h3> <form ng-submit="goNext()"> <div class="form-group" show-errors> <label>Reason to Attach this Source to this Person <small>(Optional)</small> </label> <textarea class="form-control" ng-model="data.attach.justification" rows="5">{{data.attach.justification}}</textarea> <span id="helpBlock" class="help-block">This will be useful for other patrons who see your source, and want to know why you attached it.<br><br>A few examples: <br><ul> <li>"This is one of my Grandparents and I know it applies."</li> <li>"I\'m not sure if this is correct, more research is needed."</li> </ul></span> </div> <div class="text-right"> <a ng-click="goBack()" type="submit" class="btn btn-default pull-left"><i class="glyphicon glyphicon-arrow-left"></i>&nbsp;&nbsp; Go Back </a> &nbsp;&nbsp; <button type="submit" class="btn btn-primary">Create<span class="hidden-xs"> & Attach</span></button> </div> <select ng-repeat="source in sourceBox"> <option value="RecordSeek">RecordSeek</option> </select> </form>'),a.put("views/fs-complete.html",'<div class="ng-hide" ng-show="data.complete && data.complete == \'noAttachment\'"> <h3>Congratulations! A source has been created and added to your <span class="text-info">source box</span>.<br> <small>"{{data.title}}"</small> </h3> <p>The FamilySearch <span class="text-info">source box</span> lets you preserve the record sources that you find for later use. Once a source is in your <span class="text-info">source box</span>, you can easily find it again without having to search for it. You can also easily attach the sources in your <span class="text-info">source box</span> to your ancestors in FamilySearch Family Tree.</p> <div class="text-center"> <br><a href="{{datasourceDescription.url}}" class="btn btn-info" target="_blank">View source box on FamilySearch</a><br><br> <a href="{{fsRedirect($parent.treeViewURL)}}" target="_blank" class="btn btn-warning">Add new records to your Family Tree</a><br><br> </div> </div> <div class="ng-hide" ng-show="data.complete && data.complete != \'noAttachment\'"> <h3>Congratulations! A new source has been created and added to <a href="{{data.complete.url}}" target="_blank" popover-placement="top" popover="View on FamilySearch" popover-trigger="mouseenter">{{data.complete.name}}</a>.<br> <small>"{{data.title}}"</small> </h3> <div class="row ng-hide" ng-show="data.complete"> <div class="text-center"> <br><span class="ng-hide" ng-hide="!data.complete"><a href="{{data.complete.url}}" class="btn btn-info" target="_blank">View Profile on FamilySearch</a><br><br></span> <span class="ng-hide" ng-hide="data.complete"><a href="{{fsRedirect($parent.sourceBoxURL)}}" class="btn btn-info" target="_blank">View SourceBox on FamilySearch</a><br><br></span> <a ng-click="goSearch()" class="btn btn-warning">Attach to <span class="ng-hide" ng-hide="data.complete">a</span><span class="ng-hide" ng-hide="!data.complete">Another</span> Person</a><br><br> </div> </div> <div class="bs-callout bs-callout-info ng-hide" ng-show="data.search.newPerson"> <h4>A New Profile was Created, Now What?</h4> <p>So there\'s a new person in the FamilyTree, but no one likes to be alone! Did you know that this ancestor has NO relatives attached? Please head over to FamilySearch and find their relatives, parents, or anyone you can to connect them to the Family Tree.</p> <center> <button type="button" class="btn btn-success"> <i class="glyphicon glyphicon-tree-deciduous"></i>&nbsp;&nbsp;Tree View </button> <button type="button" class="btn btn-info"><i class="glyphicon glyphicon-user"></i>&nbsp;&nbsp;Profile View </button> </center> </div> </div> <div class="ng-hide" ng-show="!data.complete"> <h3>There seems to have been an error in the creation process.<br> <small>Please try again later.</small> </h3> </div> <br><br><br><p class="text-muted text-center">You may now close this window.</p>'),a.put("views/fs-create.html",'<center> <div class="la-square-jelly-box la-2x la-dark"> <div></div> <div></div> </div> </center> <h3 class="text-center">{{status}}</h3>'),a.put("views/fs-results.html",'<span class="pull-right ng-hide text-muted hello-user" ng-show="user">Hello {{user.displayName}}! <a class="logout" ng-click="logout()">Not {{user.givenName}}?</a></span> <h3>Are any of these people the <strong>{{data.search.givenName}} {{data.search.surname}}</strong> you’re looking for? </h3> <h5 class="hide">If yes, click <mark class="info">select</mark> . If not, <a ng-click="addPerson()">add a new person</a></h5> <div class="row container-fluid" resize> <form class="results"> <table class="table table-striped table-hover table-condensed table-responsive header-fixed"> <thead> <tr> <th class="select">&nbsp;</th> <th class="person">Person</th> <th class="events">Events</th> <th class="parents">Parents</th> <th class="spouse">Spouse(s)</th> </tr> </thead> <tbody style="max-height: {{windowHeight - 305}}px"> <tr class="active rowNotice no-animate" class="ng-hide" ng-show="bigTotalItems"> <td colspan="5"><span class="pull-right">{{min}}-{{max}} of {{bigTotalItems}} results</span>  </td></tr> <tr class="loading no-animate" ng-hide="searchResults"> <td colspan="5"><i class="glyphicon glyphicon-time"></i></td> </tr> <tr class="loading ng-hide" ng-hide="!searchResults || searchResults.length > 0"> <td colspan="5">No Results Found</td> </tr> <tr ng-repeat="result in searchResults" class="ng-hide" ng-show="searchResults"> <td class="select vert-align"> <a class="btn btn-xs btn-success" ng-click="goNext(result.pid, result.name, result.url)">Select</a><br><span class="confidence" popover-placement="right" popover="How well this matches your search." popover-trigger="mouseenter"><i class="glyphicon glyphicon-{{result.confidence >= 1 ? \'star\' : \'star-empty\'}}"></i><i class="glyphicon glyphicon-{{result.confidence >= 2 ? \'star\' : \'star-empty\'}}"></i><i class="glyphicon glyphicon-{{result.confidence >= 3 ? \'star\' : \'star-empty\'}}"></i><i class="glyphicon glyphicon-{{result.confidence >= 4 ? \'star\' : \'star-empty\'}}"></i><i class="glyphicon glyphicon-{{result.confidence >= 5 ? \'star\' : \'star-empty\'}}"></i></span><i></i> </td> <td class="person"><i class="glyphicon glyphicon-stop {{result.gender}}"></i><a href="{{result.url}}" popover-placement="right" popover="View on FamilySearch" popover-trigger="mouseenter" target="_blank">{{result.name}}</a><br> <small>{{result.pid}}</small> </td> <td class="events"> <div class="birth ng-hide" ng-show="result.birthDate || result.birthPlace"><span class="eLabel" popover-placement="top" popover="Birth" popover-trigger="mouseenter">b.</span> {{result.birthDate}} <i class="glyphicon glyphicon-map-marker ng-hide" ng-show="result.birthPlace && result.birthDate" popover-trigger="mouseenter" popover-placement="top" popover="{{result.birthPlace}}"></i> <span class="ng-hide" ng-show="result.birthPlace && !result.birthDate" popover-trigger="mouseenter" popover-placement="top" popover="{{result.birthPlace}}">{{result.birthPlace}}</span> </div> <div class="death ng-hide" ng-show="result.deathDate || result.deathPlace"><span popover-placement="bottom" popover="Death" popover-trigger="mouseenter" class="eLabel">d.</span> {{result.deathDate}} <i class="glyphicon glyphicon-map-marker ng-hide" ng-show="result.deathPlace && result.deathDate" popover-trigger="mouseenter" popover-placement="bottom" popover="{{result.deathPlace}}"></i> <span class="ng-hide" ng-show="result.deathPlace && !result.deathDate" popover-trigger="mouseenter" popover-placement="bottom" popover="{{result.deathPlace}}">{{result.deathPlace}}</span> </div> </td> <td class="parents"><span ng-repeat="father in result.father"><i class="glyphicon glyphicon-stop {{father.gender}}"></i><a href="{{father.url}}" target="_blank">{{father.name}}</a></span> <span ng-repeat="mother in result.mother"><i class="glyphicon glyphicon-stop {{mother.gender}}"></i><a href="{{mother.url}}" target="_blank">{{mother.name}}</a></span> </td> <td class="spouse"><span ng-repeat="spouse in result.spouse"><i class="glyphicon glyphicon-stop {{spouse.gender}}"></i><a href="{{spouse.url}}" target="_blank">{{spouse.name}}</a></span></td> </tr> </tbody> </table> <center> \x3c!--<pagination total-items="bigTotalItems" ng-model="currentPage" max-size="maxSize" class="pagination-sm" items-per-page="15" num-pages="numPages" ng-change="pageChanged()"></pagination>--\x3e <pagination total-items="bigTotalItems" ng-model="currentPage" max-size="maxSize" class="pagination-sm" items-per-page="15" boundary-links="true" rotate="false" num-pages="numPages" ng-change="pageChanged()"></pagination> </center> <div class="row container-fluid text-center result-action"> <div class="btn-toolbar"> <div class="btn-group pull-left"> <a ng-click="goBack()" class="btn btn-primary"><i class="glyphicon glyphicon-arrow-left"></i>&nbsp;&nbsp; Modify Search</a> </div> <div class="btn-group pull-right"> <span class="btn-text text-muted hidden-xs">Person not found?</span> <a ng-click="createNow()" class="btn btn-default" popover-placement="left" popover="Save the source to your SourceBox, without attaching to a profile." popover-trigger="mouseenter">Save Now, Attach Later</a> <span class="btn-text text-muted hidden-xs hide">If found, click <mark class="success">Select</mark>.</span> <div class="hide"> <span class="btn-text text-muted hidden-xs">No luck?</span> <a ng-click="addPerson()" class="btn btn-default">Add a New Person<span class="hidden-xs">&nbsp;&nbsp;&nbsp;<i class="glyphicon glyphicon glyphicon-hand-right"></i></span></a> </div> </div> </div> </div> </form> </div>'),
a.put("views/fs-search.html",'<span class="pull-right ng-hide text-muted hello-user" ng-show="user">Hello {{user.displayName}}! <a class="logout" ng-click="logout()">Not {{user.givenName}}?</a></span> <h3>Search for an existing person</h3> <div class="row container-fluid"> <form class="personSearch" ng-init="isDisabled = false" ng-submit="goNext()"> <div class="visible-xs"> <div class="row"> <div class="col-sm-12"> <div class="form-group input-group-sm"> <label>Search by Person ID Number </label> <input type="text" class="form-control" ng-model="data.search.pid"> </div> </div> </div> <hr> </div> <div class="row"> <div class="col-sm-3 col-xs-6"> <div class="form-group"> <label>Given Name(s)</label> <div class="input-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.givenName"> <div class="input-group-addon" ng-show="data.search.advanced"> <input type="checkbox" ng-disabled="data.search.pid" ng-model="data.search.givenNameExact" value="1" popover="Exact" popover-trigger="mouseenter" popover-placement="bottom"> </div> </div> </div> </div> <div class="col-sm-3 col-xs-6"> <div class="form-group input-group-sm"> <label class="hidden-xs">Last Names (Surname)</label> <label class="visible-xs">Surname</label> <div class="input-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.surname" required> <div class="input-group-addon" ng-show="data.search.advanced"> <input type="checkbox" ng-disabled="data.search.pid" ng-model="data.search.surnameExact" value="1" popover="Exact" popover-trigger="mouseenter" popover-placement="bottom"> </div> </div> </div> </div> <div class="col-sm-3 col-xs-6"> <div class="form-group input-group-sm"> <label>Gender </label> <select class="form-control" ng-disabled="data.search.pid" ng-model="data.search.gender"> <option></option> <option value="Male">Male</option> <option value="Female">Female</option> <option value="Unknown">Unknown</option> </select> </div> </div> <div class="col-sm-3 col-xs-6"> <div class="form-group input-group-sm"> <label>Event Type </label> <select class="form-control" ng-disabled="data.search.pid" ng-model="data.search.eventType"> <option></option> <option value="birthLike">Birth</option> <option value="marriageLike">Marriage</option> <option value="deathLike">Death</option> </select> </div> </div> </div> <div class="visible-xs"> <div class="row"> <div class="col-sm-3"> <div class="form-group input-group-sm"> <label>Event Year (Range) </label><br> <input type="text" class="form-control eventYearFrom" placeholder="From" ng-disabled="data.search.pid || !data.search.eventType" ng-model="data.search.eventDateFrom"> <input type="text" class="form-control eventYearTo" placeholder="To" ng-disabled="data.search.pid || !data.search.eventType" ng-model="data.search.eventDateTo"> </div> </div> <div class="col-sm-3"> <div class="form-group"> <label>Event Place </label> <div class="input-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid || !data.search.eventType" ng-model="data.search.eventPlace" typeahead-wait-ms="450" typeahead="address for address in getLocation($viewValue)" class="form-control"> <div class="input-group-addon" ng-show="data.search.advanced"> <input type="checkbox" ng-disabled="data.search.pid || !data.search.eventType" ng-model="data.search.eventPlaceExact" value="1" popover="Exact" popover-trigger="mouseenter" popover-placement="bottom"> </div> </div> </div> </div> </div> </div> <div class="row"> <div class="col-sm-3 col-xs-6"> <div class="form-group"> <label>Spouse\'s Given<span class="hidden-xs"> Name(s)</span> </label> <div class="input-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.spouseGivenName"> <div class="input-group-addon" ng-show="data.search.advanced"> <input type="checkbox" ng-disabled="data.search.pid" ng-model="data.search.spouseGivenNameExact" value="1" popover="Exact" popover-trigger="mouseenter" popover-placement="bottom"> </div> </div> </div> </div> <div class="col-sm-3 col-xs-6"> <div class="form-group"> <label>Spouse\'s Surname </label> <div class="input-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.spouseSurname"> <div class="input-group-addon" ng-show="data.search.advanced"> <input type="checkbox" ng-disabled="data.search.pid" ng-model="data.search.spouseSurnameExact" value="1" popover="Exact" popover-trigger="mouseenter" popover-placement="bottom"> </div> </div> </div> </div> <div class="hidden-xs"> <div class="col-sm-3"> <div class="form-group input-group-sm"> <label>Event Year (Range) </label><br> <input type="text" class="form-control eventYearFrom" placeholder="From" ng-disabled="data.search.pid || !data.search.eventType" ng-model="data.search.eventDateFrom"> <input type="text" class="form-control eventYearTo" placeholder="To" ng-disabled="data.search.pid || !data.search.eventType" ng-model="data.search.eventDateTo"> </div> </div> <div class="col-sm-3"> <div class="form-group"> <label>Event Place </label> <div class="input-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid || !data.search.eventType" ng-model="data.search.eventPlace" typeahead-wait-ms="450" typeahead="address for address in getLocation($viewValue)" class="form-control"> <div class="input-group-addon" ng-show="data.search.advanced"> <input type="checkbox" ng-disabled="data.search.pid || !data.search.eventType" ng-model="data.search.eventPlaceExact" value="1" popover="Exact" popover-trigger="mouseenter" popover-placement="bottom"> </div> </div> </div> </div> </div> </div> <div class="row"> <div class="col-sm-3 col-xs-6"> <div class="form-group"> <label>Mother\'s Given<span class="hidden-xs"> Name(s)</span> </label> <div class="input-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.motherGivenName"> <div class="input-group-addon" ng-show="data.search.advanced"> <input type="checkbox" ng-disabled="data.search.pid" ng-model="data.search.motherGivenNameExact" value="1" popover="Exact" popover-trigger="mouseenter" popover-placement="bottom"> </div> </div> </div> </div> <div class="col-sm-3 col-xs-6"> <div class="form-group"> <label>Mother\'s Surname </label> <div class="input-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.motherSurname"> <div class="input-group-addon" ng-show="data.search.advanced"> <input type="checkbox" ng-disabled="data.search.pid" ng-model="data.search.motherSurnameExact" value="1" popover="Exact" popover-trigger="mouseenter" popover-placement="bottom"> </div> </div> </div> </div> <div class="col-sm-3 col-xs-6"> <div class="form-group"> <label>Father\'s Given<span class="hidden-xs"> Name(s)</span></label> <div class="input-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.fatherGivenName"> <div class="input-group-addon" ng-show="data.search.advanced"> <input type="checkbox" ng-disabled="data.search.pid" ng-model="data.search.fatherGivenNameExact" value="1" popover="Exact" popover-trigger="mouseenter" popover-placement="bottom"> </div> </div> </div> </div> <div class="col-sm-3 col-xs-6"> <div class="form-group"> <label>Father\'s Surname </label> <div class="input-group input-group-sm"> <input type="text" class="form-control" ng-disabled="data.search.pid" ng-model="data.search.fatherSurname"> <div class="input-group-addon" ng-show="data.search.advanced"> <input type="checkbox" ng-disabled="data.search.pid" ng-model="data.search.fatherSurnameExact" value="1" popover="Exact" popover-trigger="mouseenter" popover-placement="bottom"> </div> </div> </div> </div> </div> <div class="hidden-xs"> <hr> <div class="row"> <div class="col-xs-12"> <div class="form-group input-group-sm" ng-class="pid_state()"> <label>Search by Person ID Number </label> <input type="text" class="form-control text-center" ng-model="data.search.pid" ng-trim="false" ng-change="pid_check()" style="text-transform:uppercase"> </div> </div> </div> </div> <div class="text-right"> <a ng-click="goBack()" type="submit" class="btn btn-default pull-left"><i class="glyphicon glyphicon-arrow-left"></i>&nbsp;&nbsp; Modify Source </a> <span class="hidden-xs"><a class="btn btn-link" ng-click="advancedSearch()">{{advancedButtonText}}</a> &nbsp;&nbsp;</span> <span class=""><a class="btn btn-default btn-sm" ng-click="resetSearch()">Reset</a> &nbsp;&nbsp;</span> <button type="submit" class="btn btn-primary" ng-disabled="validData()">Next &nbsp;&nbsp;<i class="glyphicon glyphicon-arrow-right"></i></button> <span class="visible-xs"><a class="btn btn-link" ng-click="advancedSearch()">{{advancedButtonText}}</a></span> </div> </form> </div>'),a.put("views/fs-source.html",'<span class="pull-right ng-hide text-muted hello-user" ng-show="user">Hello {{user.displayName}}! <a class="logout" ng-click="logout()">Not {{user.givenName}}?</a></span> <h3 xmlns="http://www.w3.org/1999/html">Attach a Source <a class="btn btn-success pull-right btn-sm" id="sourceTags" popover-template="myPopover.templateUrl" popover-placement="left" popover-is-open="myPopover.isOpen" ng-click="myPopover.toggle()"><i class="glyphicon glyphicon-tags"></i> Tag this Source to Events <span class="badge">{{tagCount}}</span></a> <br> <small class="hide">Before we add {name} to your tree, let’s create a source (similar to a bookmark) for future reference.</small> \x3c!--<a class="btn btn-info pull-right btn-sm ng-hide" ng-click="goUpload()">Upload Memory</a>--\x3e </h3> <div class="row container-fluid"> <form ng-submit="goNext()"> <div class="form-group input-group-sm"> <label>Source Title </label> <input type="text" class="form-control" ng-model="data.title" placeholder="Enter a title for this source" required> </div> <div class="form-group input-group-sm"> <label>Source <small>(URL)</small> </label> <input type="text" class="form-control" ng-model="data.url" placeholder="Enter a URL" required> </div> <div class="form-group input-group-sm"> <label style="width: 100%">Where the Record Is Found <small>(Citation)</small> <span style="display:block;float:right"><small>Format</small>: <select ng-model="sourceFormat" ng-change="changeFormat()"> <option ng-repeat="(key, obj) in sourceFormats" value="{{key}}"> {{key}} </option> </select> </span> </label> <textarea class="form-control" ng-model="data.citation" rows="3" required></textarea> </div> <div class="form-group input-group-sm" show-errors> <label>Describe the Record <small>(Notes)</small> </label> <textarea class="form-control" ng-model="data.notes" rows="3"></textarea> </div> <div ng-class="getSourceBoxes ? \'form-group input-group-sm has-warning col-xs-10a\' : \'form-group input-group-sm col-xs-10a\'" class="" title="Loading data..."><label>Source Box <small>(Folder)</small></label> <select class="form-control" ng-model="data.sourcebox" popover-placement="top" popover="If in orange, your SourceBox folders are being fetched. Please wait if you want a specific folder." popover-trigger="mouseenter"> <option ng-repeat="(key, value) in sourcebox" ng-selected="{{key == \'Home (Unorganized)\'}}" value="{{value}}"> {{key}} </option> </select> </div> \x3c!--<div ng-class="getSourceBoxes ? \'form-group input-group-sm col-xs-2\' : \'form-group input-group-sm col-xs-2\'" class="" title="">--\x3e \x3c!--<label>&nbsp;</label>--\x3e \x3c!--<label class="form-control checkbox-inline">--\x3e \x3c!--<input class="" type="checkbox"> Remember </label>--\x3e \x3c!--</div>--\x3e \x3c!--<br style="clear:both;" />--\x3e <div class="text-right"> <a ng-click="goBack()" type="submit" class="btn btn-default pull-left"><i class="glyphicon glyphicon-arrow-left"></i>&nbsp;&nbsp; Go Back </a> <span class="hidden-xs"><a ng-click="createNow()" class="btn btn-xs btn-default" popover-placement="left" popover="Save the source to your SourceBox, without attaching to a profile." popover-trigger="mouseenter">Save Now, Attach Later</a><br class="visible-xs"> &nbsp;&nbsp;</span> <button type="submit" class="btn btn-primary">Next &nbsp;&nbsp;<i class="glyphicon glyphicon-arrow-right"></i></button> <span class="visible-xs"><br><a ng-click="createNow()" class="btn btn-xs btn-default" popover-placement="left" popover="Save the source to your SourceBox, without attaching to a profile." popover-trigger="mouseenter">Save Now, Attach Later</a></span> </div> </form> </div> <script type="text/ng-template" id="tagTemplate.html"><div style="width:240px;">\n    <div class="text-center"><strong>Select the events this source <br/>should be attached to.</strong></div>\n\n    <div style="margin: 5px 0 10px 0;">\n      <div class="row">\n        <div class="col-sm-6">\n          <label class="checkbox-inline">\n            <input type="checkbox" ng-change="tagCounting()" ng-model="data.tags.name"> Name </label>\n        </div>\n        <div class="col-sm-6">\n          <label class="checkbox-inline">\n            <input type="checkbox" ng-change="tagCounting()" ng-model="data.tags.gender"> Gender </label>\n        </div>\n      </div>\n\n      <div class="row">\n        <div class="col-sm-6">\n          <label class="checkbox-inline">\n            <input type="checkbox" ng-change="tagCounting()" ng-model="data.tags.birth"> Birth </label>\n        </div>\n        <div class="col-sm-6">\n          <label class="checkbox-inline">\n            <input type="checkbox" ng-change="tagCounting()" ng-model="data.tags.christening"> Christening\n          </label>\n        </div>\n      </div>\n\n      <div class="row">\n        <div class="col-sm-6">\n          <label class="checkbox-inline">\n            <input type="checkbox" ng-change="tagCounting()" ng-model="data.tags.death"> Death </label>\n        </div>\n        <div class="col-sm-6">\n          <label class="checkbox-inline">\n            <input type="checkbox" ng-change="tagCounting()" ng-model="data.tags.burial"> Burial </label>\n        </div>\n      </div>\n\n\n    </div>\n    <a class="btn btn-info btn-xs center-block" ng-click="myPopover.close()">Close</a>\n  </div><\/script>'),a.put("views/fs-upload.html","<p>This is the fs-upload view.</p>"),a.put("views/loading.html",'<center> <div class="la-square-jelly-box la-2x la-dark"> <div></div> <div></div> </div> </center> <h3 class="text-center">{{status}}</h3>'),a.put("views/main.html",'<div class="alert alert-success text-center" role="alert">Ancestry URLs and FamilySearch login redirect issues are now resolved.</div> <div class="alert alert-warning text-center hide" role="alert">We just added different source citation formats as well as TONS of bug fixes!</div> <div class="alert alert-warning text-center hide" role="alert">We changed the MLA source citations on our side. FamilySearch should work again without any issue. :)</div> <div class="alert alert-info text-center hide" role="alert">For those of you who use Ancestry, now you can change the source media URL. Enjoy!</div> <div class="alert alert-success text-center hide" role="alert">Sorry for the LONG delay in fixes! Ancestry is now working again also with proper URL shortening from Ancestry to FamilySearch. Thanks Mark for the code!</div> <div class="alert alert-danger text-center hide" role="alert">FamilySearch has released code with breaks the person search for everyone. <br>Until this issue gets resolved, <a href="https://github.com/FamilySearch/integration-data-copy/issues/11" target="_blank">details found here</a>, person search on FamilySearch will not work. We will keep you posted.</div> <div class="jumbotron"> <h1>Create a Source</h1> <p class="lead"> Please select a service to add your source to. </p> </div> <div class="container-fluid serviceSelect"> <div class="row"> <div class="col-xs-6 text-center"> <a data-href="/fs-source" id="loadFamilySearch" data-tracking="FamilySearch" ng-click="actionTaken( $event )"><img src="images/familysearch.0a1c0029.png" class="img-responsive img-thumbnail hidden-xs center-block" popover-placement="bottom" popover="FamilySearch.org" popover-trigger="mouseenter"><img src="images/familysearch-icon.89267332.png" class="img-responsive img-thumbnail visible-xs center-block"></a><h4 class="visible-xs text-muted" style="margin-top:10.5px">FamilySearch</h4> </div> <div class="col-xs-6 text-center"> <a data-href="/a-source" id="loadAncestry" data-tracking="Ancestry" ng-click="actionTaken( $event )"><img src="images/ancestry.83b9eadf.png" class="img-responsive img-thumbnail hidden-xs center-block" popover-placement="bottom" popover="Ancestry.com" popover-trigger="mouseenter"><img src="images/ancestry-icon.6e4456c4.png" class="img-responsive img-thumbnail visible-xs center-block"></a><h4 class="visible-xs text-muted" style="margin-top:10.5px">Ancestry</h4> </div> </div> </div>'),a.put("views/support.html",'<h1>Get Support <small>( sometimes we all just need a little help )</small></h1> <h4>Should you need anything, or have ideas, please drop me a line.</h4> <h4 class="text-center"><a href="mailto:me@dovy.io?subject=RecordSeek">me@dovy.io</a></h4>')}]);